import{_ as p,ad as t,c as d,o,b as i,k as a,aE as g,a5 as e,m as l}from"./chunks/framework.BN_kmrHV.js";const A=JSON.parse('{"title":"å°† TrueNAS å…±äº«å­˜å‚¨è¿æ¥åˆ° K8s é›†ç¾¤","description":"","frontmatter":{"tags":["å¼€å‘/äº‘åŸç”Ÿ/Kubernetes/K8s","è¿ç»´/äº‘åŸç”Ÿ/Kubernetes/K8s","è½¯ä»¶/TrueNAS","è½¯ä»¶/TrueNAS-SCALE","å‘½ä»¤è¡Œ/apt","å‘½ä»¤è¡Œ/kubectl","å¼€å‘/äº‘åŸç”Ÿ/å®¹å™¨å­˜å‚¨æ¥å£/CSI","è®¡ç®—æœº/æ–‡ä»¶ç³»ç»Ÿ/FileSystem/fs/NFS"]},"headers":[],"relativePath":"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å°† TrueNAS å…±äº«å­˜å‚¨è¿æ¥åˆ° K8s é›†ç¾¤.md","filePath":"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å°† TrueNAS å…±äº«å­˜å‚¨è¿æ¥åˆ° K8s é›†ç¾¤.md"}'),c={name:"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å°† TrueNAS å…±äº«å­˜å‚¨è¿æ¥åˆ° K8s é›†ç¾¤.md"};function C(b,s,y,u,f,F){const h=t("NolebasePageProperties"),n=t("VPNolebaseInlineLinkPreview"),k=t("NolebaseGitContributors"),r=t("NolebaseGitChangelog");return o(),d("div",null,[s[5]||(s[5]=i("h1",{id:"å°†-truenas-å…±äº«å­˜å‚¨è¿æ¥åˆ°-k8s-é›†ç¾¤",tabindex:"-1"},[e("å°† TrueNAS å…±äº«å­˜å‚¨è¿æ¥åˆ° K8s é›†ç¾¤ "),i("a",{class:"header-anchor",href:"#å°†-truenas-å…±äº«å­˜å‚¨è¿æ¥åˆ°-k8s-é›†ç¾¤","aria-label":"Permalink to â€œå°† TrueNAS å…±äº«å­˜å‚¨è¿æ¥åˆ° K8s é›†ç¾¤â€"},"â€‹")],-1)),a(h),i("p",null,[s[1]||(s[1]=e("å‚è€ƒçš„ï¼š",-1)),a(n,{href:"https://www.truenas.com/docs/core/coretutorials/sharing/nfsshare/#connecting-to-the-nfs-share-with-a-linuxunix-os",target:"_blank",rel:"noreferrer"},{default:l(()=>[...s[0]||(s[0]=[e("Connecting to the NFS Share with a Linux/Unix OS - NFS Share Creation | TrueNAS Documentation Hub",-1)])]),_:1})]),s[6]||(s[6]=g(`<p>å®‰è£…å¿…è¦èµ„æºï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nfs-common</span></span></code></pre></div><p>è·å– Helm Chart</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> csi-driver-nfs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://raw.githubusercontent.com/kubernetes-csi/csi-driver-nfs/master/charts</span></span></code></pre></div><p>æˆ‘ä»¬æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œå°† NFS CSI é©±åŠ¨æ’ä»¶éƒ¨ç½²æˆ 3 ä¸ªå‰¯æœ¬çš„å½¢å¼ï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> csi-driver-nfs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> csi-driver-nfs/csi-driver-nfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-system</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --set</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> controller.replicas=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    --set</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeletDir=/var/lib/kubelet</span></span></code></pre></div><p>è¿™ä¸ªæ—¶å€™åˆ›å»ºä¸€ä¸ªæ–°çš„ Storage Class çš„æè¿°æ–‡ä»¶ï¼š</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">storage.k8s.io/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">StorageClass</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nfs.nas.example.com</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">provisioner</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nfs.csi.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nas.example.com</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  share</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/mnt/somepool/share/data/kubernetes/clusters/homelab-kubernetes-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">reclaimPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Delete</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">volumeBindingMode</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Immediate</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">mountOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nfsvers=4.1</span></span></code></pre></div><p>æ¥ä¸‹æ¥ç›´æ¥ Apply å³å¯ï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ./nfs-storage-class.yaml</span></span></code></pre></div>`,10)),i("ul",null,[i("li",null,[a(n,{href:"https://wiki.debian.org/NFS",target:"_blank",rel:"noreferrer"},{default:l(()=>[...s[2]||(s[2]=[e("NFS - Debian Wiki",-1)])]),_:1})]),i("li",null,[a(n,{href:"https://packages.debian.org/search?keywords=nfs",target:"_blank",rel:"noreferrer"},{default:l(()=>[...s[3]||(s[3]=[e("Debian -- è½¯ä»¶åŒ…æœç´¢ç»“æœ -- nfs",-1)])]),_:1})]),i("li",null,[a(n,{href:"https://github.com/kubernetes-csi/csi-driver-nfs/tree/master/charts",target:"_blank",rel:"noreferrer"},{default:l(()=>[...s[4]||(s[4]=[e("csi-driver-nfs/charts at master Â· kubernetes-csi/csi-driver-nfs",-1)])]),_:1})])]),a(k),a(r)])}const B=p(c,[["render",C]]);export{A as __pageData,B as default};
