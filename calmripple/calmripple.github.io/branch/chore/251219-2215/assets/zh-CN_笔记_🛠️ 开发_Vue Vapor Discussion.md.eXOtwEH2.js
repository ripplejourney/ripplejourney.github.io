import{_ as d,ad as h,c as o,o as g,b as i,k as n,aE as l,a5 as a,m as e}from"./chunks/framework.BN_kmrHV.js";const u=JSON.parse('{"title":"Vue Vapor Discussion","description":"","frontmatter":{},"headers":[],"relativePath":"zh-CN/ç¬”è®°/ğŸ› ï¸ å¼€å‘/Vue Vapor Discussion.md","filePath":"zh-CN/ç¬”è®°/ğŸ› ï¸ å¼€å‘/Vue Vapor Discussion.md"}'),B={name:"zh-CN/ç¬”è®°/ğŸ› ï¸ å¼€å‘/Vue Vapor Discussion.md"};function y(E,s,c,f,F,A){const k=h("NolebasePageProperties"),t=h("VPNolebaseInlineLinkPreview"),p=h("NolebaseGitContributors"),r=h("NolebaseGitChangelog");return g(),o("div",null,[s[10]||(s[10]=i("h1",{id:"vue-vapor-discussion",tabindex:"-1"},[a("Vue Vapor Discussion "),i("a",{class:"header-anchor",href:"#vue-vapor-discussion","aria-label":"Permalink to â€œVue Vapor Discussionâ€"},"â€‹")],-1)),n(k),s[11]||(s[11]=l(`<p>æœ¬æ–‡ç²—ç•¥åˆ—ä¸¾äº†ä¸€ä¸‹ Vapor ç›®å‰éœ€è¦å…·ä½“è®¨è®ºçš„ä¸€äº›äº‹æƒ…</p><p>é—®é¢˜æ±‡æ€»ï¼š</p><ol><li>runtime-vapor å’Œ runtime-core ä»£ç å¤ç”¨</li><li>Render Watch and Render Effect</li><li>onEffectCleanup ç›´æ¥é›†æˆåˆ° reactivity ä¸­</li><li>runtime-vapor æ·»åŠ  renderEffectï¼Œç§»é™¤åŸæœ‰çš„ watchEffect å’Œ watch çš„ flush rendering</li><li>renderWatch é‡Œé¢å®ç° beforeUpdate, updated ä¹‹ç±»çš„å„ç§é’©å­</li><li>å¦‚ä½•æ··ç”¨ Vapor Component å’Œ vDom Componentï¼Ÿ</li><li>å…³äºå…¶å®ƒæœªå®ç°åŠŸèƒ½çš„è®¨è®º</li></ol><h2 id="effectid" tabindex="-1">EffectID <a class="header-anchor" href="#effectid" aria-label="Permalink to â€œEffectIDâ€">â€‹</a></h2><p>å¦‚æœæŠŠ v-if è¿™ç±»å¯¹ EffectID æœ‰éœ€æ±‚çš„åœºæ™¯åšæˆç±»ä¼¼è¿™æ ·çš„ runtime codeï¼Œå¥½åƒå°±ä¸éœ€è¦ effect id äº†å‘¢</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> t0</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> template</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&lt;div&gt;&lt;/div&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">renderWatch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> /* vIfExpression */</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> scope</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> EffectScope</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    onEffectCleanup</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    scope</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> t1</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> template</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&lt;div&gt;&lt;/div&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      // ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      renderEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        setText</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">n1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">bar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span></code></pre></div><h2 id="runtime-vapor-å’Œ-runtime-core-ä»£ç å¤ç”¨" tabindex="-1">runtime-vapor å’Œ runtime-core ä»£ç å¤ç”¨ <a class="header-anchor" href="#runtime-vapor-å’Œ-runtime-core-ä»£ç å¤ç”¨" aria-label="Permalink to â€œruntime-vapor å’Œ runtime-core ä»£ç å¤ç”¨â€">â€‹</a></h2><p>ä¸»è¦æ¶‰åŠ <code>scheduler.ts</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶è´Ÿè´£è°ƒåº¦ effect çš„ flushï¼Œä¹Ÿå°±æ˜¯ <code>sync</code>/<code>pre</code>/<code>post</code> è¿™äº›ï¼Œå› ä¸ºè€ƒè™‘åˆ°ä¹‹åéœ€è¦æ”¯æŒ Vapor Component å’Œ vDom Componentï¼Ÿçš„æ··ç”¨é—®é¢˜ï¼Œç°åœ¨çš„ vapor å’Œ core å„æœ‰ä¸€ä¸ª scheduler.ts æ–‡ä»¶çš„å½¢å¼æ˜¯æœ‰é—®é¢˜çš„ã€‚</p>`,8)),i("p",null,[n(t,{href:"https://github.com/vuejs/core-vapor/pull/69",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[0]||(s[0]=[a("ç›¸å…³ PR",-1)])]),_:1})]),i("p",null,[n(t,{href:"https://github.com/vuejs/core-vapor/pull/69/files#diff-c60e2c7d0cb1f0141de00557a7f54c49c8e1e88dddc4e0b74c3fadef78d088ffR51-R62",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[1]||(s[1]=[a("ç›¸å…³ä»£ç ",-1)])]),_:1})]),s[12]||(s[12]=l('<h2 id="render-watch-render-effect" tabindex="-1">Render Watch / Render Effectï¼š <a class="header-anchor" href="#render-watch-render-effect" aria-label="Permalink to â€œRender Watch / Render Effectï¼šâ€">â€‹</a></h2><p>åœ¨ render å‡½æ•°ä¸­ä½¿ç”¨ä¸“ç”¨çš„ Render <code>watch</code> å’Œ Render <code>watchEffect</code> API</p><h2 id="å°†-oneffectcleanup-ç›´æ¥é›†æˆåˆ°-reactivity-package-ä¸­" tabindex="-1">å°† onEffectCleanup ç›´æ¥é›†æˆåˆ° reactivity package ä¸­ <a class="header-anchor" href="#å°†-oneffectcleanup-ç›´æ¥é›†æˆåˆ°-reactivity-package-ä¸­" aria-label="Permalink to â€œå°† onEffectCleanup ç›´æ¥é›†æˆåˆ° reactivity package ä¸­â€">â€‹</a></h2><p>æˆ‘ä»¬éœ€è¦è®¨è®ºå°†å®ƒåŠ å…¥ <strong>reactivity pkg</strong> æˆ–è€…å•ç‹¬çš„ <strong>scheduler pkg</strong> ä¸­</p><p>è¿™ä¸ª <code>onEffectCleanup</code> å·²ç»åœ¨ Vapor ä¸­å®è£…äº†ï¼Œä¸‹é¢æ˜¯å¯¹åº”çš„ Issue å’Œ PR</p>',5)),i("p",null,[n(t,{href:"https://github.com/vuejs/core-vapor/issues/67",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[2]||(s[2]=[a("Issue",-1)])]),_:1}),s[4]||(s[4]=a(" / ",-1)),n(t,{href:"https://github.com/vuejs/core-vapor/pull/69",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[3]||(s[3]=[a("PR",-1)])]),_:1})]),s[13]||(s[13]=l(`<p>ç”¨èµ·æ¥å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œä¸‹é¢çš„ä¾‹å­ä¸­æ¼”ç¤ºäº† <code>@[eventName]=&quot;handler&quot;</code> è¿™ç§æƒ…å†µ, è¿™é‡Œçš„ on å‡½æ•°æ˜¯ runtime-vapor æä¾›çš„ä¸€ä¸ªè¿è¡Œæ—¶ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// in component setup or render</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">watchEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">el1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">eventName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">handler</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">el2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">eventName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">handler</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// in runtime-vapor pkg</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">handler</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  el</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">handler</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  onEffectCleanup</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    el</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">handler</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>Additionally, provide support for <code>watch</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">newId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">oldId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">cancel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> doAsyncWork</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">newId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // \`cancel\` will be called if \`id\` changes, cancelling</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // the previous request if it hasn&#39;t completed yet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  onEffectCleanup</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">cancel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span></code></pre></div><h2 id="runtime-vapor-æ·»åŠ -rendereffect-ç§»é™¤åŸæœ‰çš„-watcheffect-å’Œ-watch-çš„-flush-rendering" tabindex="-1">runtime-vapor æ·»åŠ  renderEffectï¼Œç§»é™¤åŸæœ‰çš„ watchEffect å’Œ watch çš„ flush rendering <a class="header-anchor" href="#runtime-vapor-æ·»åŠ -rendereffect-ç§»é™¤åŸæœ‰çš„-watcheffect-å’Œ-watch-çš„-flush-rendering" aria-label="Permalink to â€œruntime-vapor æ·»åŠ  renderEffectï¼Œç§»é™¤åŸæœ‰çš„ watchEffect å’Œ watch çš„ flush renderingâ€">â€‹</a></h2><p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é™¤äº† watchEffect çš„ render ç‰ˆæœ¬ä¹‹å¤–ï¼Œåº”è¯¥è¿˜éœ€è¦ watch çš„ render ç‰ˆæœ¬å§<br> æˆ‘ä¸¾ä¸ªä¾‹å­ï¼š</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:inherit;">Comp</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D19A66;"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;show&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> /&gt;</span></span></code></pre></div><p><strong>Compiled To</strong></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">renderEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // âŒ è¿™é‡Œé¢çš„ setup å’Œ render ä¹Ÿä¼šè¢«ä½œä¸º Effect çš„ä¾èµ–è¿› âŒ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> comp</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> createComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Comp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    insert</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">comp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    onEffectCleanup</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      /* ... */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">renderWatch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">show</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> /* æˆ–è€…å…¶å®ƒè¡¨è¾¾å¼ */</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // âœ… è¿™æ ·å°±æ²¡é—®é¢˜äº† âœ…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> comp</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> createComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Comp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    insert</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">comp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    onEffectCleanup</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      /* ... */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span></code></pre></div><h2 id="renderwatch-é‡Œé¢å®ç°-beforeupdate-updated-ä¹‹ç±»çš„å„ç§é’©å­" tabindex="-1">renderWatch é‡Œé¢å®ç° beforeUpdate, updated ä¹‹ç±»çš„å„ç§é’©å­ <a class="header-anchor" href="#renderwatch-é‡Œé¢å®ç°-beforeupdate-updated-ä¹‹ç±»çš„å„ç§é’©å­" aria-label="Permalink to â€œrenderWatch é‡Œé¢å®ç° beforeUpdate, updated ä¹‹ç±»çš„å„ç§é’©å­â€">â€‹</a></h2><p>å¾…è®¨è®ºæ›´å¤šç»†èŠ‚</p><h2 id="å¦‚ä½•æ··ç”¨-vapor-component-å’Œ-vdom-component" tabindex="-1">å¦‚ä½•æ··ç”¨ Vapor Component å’Œ vDom Componentï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•æ··ç”¨-vapor-component-å’Œ-vdom-component" aria-label="Permalink to â€œå¦‚ä½•æ··ç”¨ Vapor Component å’Œ vDom Componentï¼Ÿâ€">â€‹</a></h2><p>å¾…è®¨è®ºæ›´å¤šç»†èŠ‚</p><h2 id="æœªå®ç°åŠŸèƒ½çš„è®¨è®º" tabindex="-1">æœªå®ç°åŠŸèƒ½çš„è®¨è®º <a class="header-anchor" href="#æœªå®ç°åŠŸèƒ½çš„è®¨è®º" aria-label="Permalink to â€œæœªå®ç°åŠŸèƒ½çš„è®¨è®ºâ€">â€‹</a></h2>`,14)),i("p",null,[n(t,{href:"https://github.com/vuejs/core-vapor?tab=readme-ov-file#todo",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[5]||(s[5]=[a("TODO",-1)])]),_:1}),s[8]||(s[8]=a(" | ",-1)),n(t,{href:"https://github.com/vuejs/core-vapor/issues",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[6]||(s[6]=[a("Issues",-1)])]),_:1}),s[9]||(s[9]=a(" | ",-1)),n(t,{href:"https://github.com/vuejs/core-vapor/issues/4",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[7]||(s[7]=[a("Component",-1)])]),_:1})]),s[14]||(s[14]=i("p",null,"v-for #21 opened 3 weeks ago by sxzz",-1)),s[15]||(s[15]=i("p",null,"Runtime Directives todoPR welcome #19 opened 3 weeks ago by sxzz",-1)),s[16]||(s[16]=i("p",null,"v-memo on hold todo #18 opened 3 weeks ago by sxzz",-1)),s[17]||(s[17]=i("p",null,"v-model pending #17 opened last month by Ubugeeei",-1)),s[18]||(s[18]=i("p",null,"v-show pending #16 opened last month by zhangmo8",-1)),s[19]||(s[19]=i("p",null,"v-if on hold #9 opened last month by faga295",-1)),s[20]||(s[20]=i("p",null,"[Runtime] Component (base issue) on discussing todo #4 opened last month by Ubugeeei",-1)),s[21]||(s[21]=i("p",null,"Life Cycles",-1)),n(p),n(r)])}const D=d(B,[["render",y]]);export{u as __pageData,D as default};
