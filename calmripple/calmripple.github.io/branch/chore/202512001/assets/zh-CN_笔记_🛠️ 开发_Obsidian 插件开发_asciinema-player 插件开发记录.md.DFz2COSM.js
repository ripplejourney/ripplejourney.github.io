import{_ as d,ad as n,c as o,o as g,b as s,k as t,aE as l,a5 as a,m as h,dr as L,ds as S,dt as B}from"./chunks/framework.BN_kmrHV.js";const f=JSON.parse('{"title":"asciinema-player 插件开发记录","description":"","frontmatter":{"tags":["开发/前端","开发/语言/TypeScript","软件/Obsidian/插件","开发/Nodejs/Rollup"]},"headers":[],"relativePath":"zh-CN/笔记/🛠️ 开发/Obsidian 插件开发/asciinema-player 插件开发记录.md","filePath":"zh-CN/笔记/🛠️ 开发/Obsidian 插件开发/asciinema-player 插件开发记录.md"}'),A={name:"zh-CN/笔记/🛠️ 开发/Obsidian 插件开发/asciinema-player 插件开发记录.md"};function c(E,i,K,C,v,F){const e=n("NolebasePageProperties"),k=n("VPNolebaseInlineLinkPreview"),p=n("NolebaseUnlazyImg"),y=n("NolebaseGitContributors"),r=n("NolebaseGitChangelog");return g(),o("div",null,[i[14]||(i[14]=s("h1",{id:"asciinema-player-插件开发记录",tabindex:"-1"},[s("code",null,"asciinema-player"),a(" 插件开发记录 "),s("a",{class:"header-anchor",href:"#asciinema-player-插件开发记录","aria-label":"Permalink to “asciinema-player 插件开发记录”"},"​")],-1)),t(e),i[15]||(i[15]=s("h2",{id:"说明",tabindex:"-1"},[a("说明 "),s("a",{class:"header-anchor",href:"#说明","aria-label":"Permalink to “说明”"},"​")],-1)),s("p",null,[t(k,{href:"https://unix.stackexchange.com/questions/512450/how-to-use-asciinema-offline",target:"_blank",rel:"noreferrer"},{default:h(()=>[...i[0]||(i[0]=[a("如何离线使用 asciinema",-1)])]),_:1}),t(k,{href:"https://github.com/asciinema/asciinema-player/blob/develop/README.md#use-the-player-in-your-html-page",target:"_blank",rel:"noreferrer"},{default:h(()=>[...i[1]||(i[1]=[a("asciinema-player 官方 API 指南 · asciinema/asciinema-player",-1)])]),_:1})]),i[16]||(i[16]=s("h2",{id:"初始化",tabindex:"-1"},[a("初始化 "),s("a",{class:"header-anchor",href:"#初始化","aria-label":"Permalink to “初始化”"},"​")],-1)),i[17]||(i[17]=s("h3",{id:"创建仓库",tabindex:"-1"},[a("创建仓库 "),s("a",{class:"header-anchor",href:"#创建仓库","aria-label":"Permalink to “创建仓库”"},"​")],-1)),s("p",null,[i[3]||(i[3]=a("去 ",-1)),t(k,{href:"https://github.com/obsidianmd/obsidian-sample-plugin",target:"_blank",rel:"noreferrer"},{default:h(()=>[...i[2]||(i[2]=[a("obsidian-sample-plugin",-1)])]),_:1}),i[4]||(i[4]=a(" 获取样例插件，可以使用 GitHub 自带的 ",-1)),i[5]||(i[5]=s("strong",null,"Use this template",-1)),i[6]||(i[6]=a("（使用这个模版）来快速创建副本到自己的 GitHub 账号",-1))]),i[18]||(i[18]=l(`<h3 id="克隆仓库到本地" tabindex="-1">克隆仓库到本地 <a class="header-anchor" href="#克隆仓库到本地" aria-label="Permalink to “克隆仓库到本地”">​</a></h3><p>一般放置到插件的目录在 <code>&lt;知识库路径&gt;/.obsidian/plugins/&lt;插件名&gt;</code> ，如果你变更过 Obsidian 的配置文件路径，把 <code>.obsidian</code> 改成你想要的即可。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> github.com/</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">用户</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">名</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">仓库</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">名</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">知识库路</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">径</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.obsidian/plugins/</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">插件</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">名</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><p>以我的为例：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> beingknowing.git:beingknowing/obsidian-asciinema-player.git</span></span></code></pre></div><h3 id="安装依赖" tabindex="-1">安装依赖 <a class="header-anchor" href="#安装依赖" aria-label="Permalink to “安装依赖”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> i</span></span></code></pre></div><h3 id="变更插件信息" tabindex="-1">变更插件信息 <a class="header-anchor" href="#变更插件信息" aria-label="Permalink to “变更插件信息”">​</a></h3><p>编辑 <code>manifest.json</code> 来调整插件的名称、作者、简介和版本等信息。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;obsidian-asciinema-player&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">插件</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> ID</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">，</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">不可以与社区已经存在的插件重复</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;asciinema Player&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">插件名称</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">插件版本号</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;minAppVersion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;0.9.12&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">要求的</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> Obsidian</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> 最小版本号</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">简介</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Ayaka Neko&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">作者</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;authorUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https://github.com/beingknowing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">作者地址</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;isDesktopOnly&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">决定了使用的是</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> Node</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> API</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">（</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">跨平台</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">） </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">还是</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> Electron</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> API</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">（</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">桌面端</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>编辑 <code>package.json</code> 文件来调整最终发布的 npm 包信息。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;obsidian-asciinema-player&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">npm</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> 包名称</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">版本号</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">简介</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;main.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">程序主要入点</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">，</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">不要改这里</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: { # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">脚本指令</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;rollup --config rollup.config.js -w&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">热加载插件</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;rollup --config rollup.config.js --environment BUILD:production&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">构建发布版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;keywords&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: [], # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">关键字</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Ayaka Neko&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">作者</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;license&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;MIT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;devDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;@rollup/plugin-commonjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;^18.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;@rollup/plugin-node-resolve&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;^11.2.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;@rollup/plugin-typescript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;^8.2.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;@types/node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;^14.14.37&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;obsidian&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;^0.12.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;rollup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;^2.32.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;tslib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;^2.2.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;typescript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;^4.2.4&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="调整文件夹结构" tabindex="-1">调整文件夹结构 <a class="header-anchor" href="#调整文件夹结构" aria-label="Permalink to “调整文件夹结构”">​</a></h3><p>一般情况下源代码都会被放置在 <code>src</code> 目录中，我们可以创建一个 <code>src</code> 目录，把 <code>main.ts</code> 放进去。</p>`,14)),s("p",null,[t(p,{src:L,alt:"",thumbhash:"y/cBBIB/IGZlqImWVoaLQM8H9Q==",placeholderSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAASCAYAAAA6yNxSAAAJcklEQVR4AQCBAH7/ACktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//AIEAfv8AKS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8AgQB+/wApLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/wCBAH7/ACktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//AIEAfv8AKS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8AgQB+/wApLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/wCBAH7/ACktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//AIEAfv8AKS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8AgQB+/wApLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/wCBAH7/ACktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//AIEAfv8AKS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8AgQB+/wApLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/wCBAH7/ACktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//AIEAfv8AKS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8AgQB+/wApLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/wCBAH7/ACktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//AIEAfv8AKS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8BgQB+/wApLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/yktL/8pLS//KS0v/01taS6LAeXzAAAAAElFTkSuQmCC",autoSizes:"true",width:"215",height:"113"})]),i[19]||(i[19]=l(`<p>然后去 <code>rollup.config.js</code> 文件中调整我们编译的程序入点路径：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  input</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;src/main.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> # </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">把</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> 字段的值从</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ts</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> 改成</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> src</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">  ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="编译并开启热加载" tabindex="-1">编译并开启热加载 <a class="header-anchor" href="#编译并开启热加载" aria-label="Permalink to “编译并开启热加载”">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dev</span></span></code></pre></div><p>现在对 <code>main.ts</code> 及其依赖的文件都会被自动编译到 <code>main.js</code> 文件中。</p><h3 id="在-obsidian-中激活我们的插件" tabindex="-1">在 Obsidian 中激活我们的插件 <a class="header-anchor" href="#在-obsidian-中激活我们的插件" aria-label="Permalink to “在 Obsidian 中激活我们的插件”">​</a></h3><ol><li>先重新加载 Obsidian</li></ol>`,7)),s("p",null,[t(p,{src:S,alt:"",thumbhash:"yvcFAoBrVmh2iAiGmIuf6vc=",placeholderSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAJCAYAAABT2S4KAAAEvElEQVR4AQCBAH7/AAwQEv8NERP/EBQW/xQYGv8XGx3/GR0f/xoeIP8aHiD/GR0f/xccHv8WGhz/FRkb/xUZG/8UGBr/FBga/xMXGf8RFRf/DxMV/w0RFP8MEBL/DBAS/w0RE/8PExX/EhYY/xQYGv8VGRv/FRkb/xMXGf8QFBb/DBAS/wkND/8HCw3/AIEAfv8AFBga/xYaHP8ZHR//HCAi/yAkJv8iJij/Iycp/yMnKf8iJij/ICQn/x8jJf8eIiT/HSEj/x0hI/8cICL/Gx8h/xkdH/8XGx3/FRkb/xQYGv8TFxn/FBga/xYaHP8YHR//Gx8h/xwgIv8bHyH/GR0f/xUZG/8SFhj/DhIU/wwQEv8AgQB+/wAhJSf/Iycp/yYqLP8pLTD/LTEz/zA0Nv8xNTf/MTU3/zA0Nv8uMzX/LTEz/ywwMv8rLzH/Ki4w/yktL/8oLC7/Jios/yMnKf8hJSf/HyMl/x8jJf8fIyX/ISUn/yMnKf8lKSv/JSkr/yQoKv8iJij/HiIk/xoeIP8XGx3/FRkb/wCBAH7/ACwwMv8uMjT/MTU3/zU5O/85PT//PEBC/z5CRP8+QkT/PUFD/zs/Qf86PkD/OD0//zc7Pf82Ojz/NTk7/zM3Of8xNTf/LjI0/yswMv8qLjD/KS0v/yktL/8qLjD/LDAy/y4yNP8uMjT/LTEz/youMP8mKiz/IiYo/x4iJP8cICL/AIEAfv8AMTU3/zM3Of82Ojz/Oz9B/z9DRf9CRkj/REhK/0RISv9DR0n/QkZI/0BERv8/Q0X/PUFD/zxAQv87P0H/OD0//zY6PP8zNzn/MDQ2/y4yNP8tMTP/LjI0/y8zNf8wNTf/MjY4/zI2OP8xNTf/LjI0/youMP8lKSv/IiYo/x8jJf8AgQB+/wAtMTP/LzM1/zM3Of83Oz3/PEBC/z9DRf9BRUf/QkZI/0FFR/9AREb/PkJE/zxAQv87P0H/OT1A/zg8Pv82Ojz/Mzc5/zA0Nv8tMTP/Ky8x/yovMf8rLzH/LDAy/y4yNP8wNDb/MDQ2/y4zNf8sMDL/Jyst/yMnKf8fIyX/HSEj/wCBAH7/ACImKP8kKCr/KCwu/y0xM/8xNjj/NTk7/zc8Pv84PD7/ODw+/zY6Pf81OTv/Mzc5/zI2OP8wNDb/LjI0/ywwMv8qLjD/Jyst/yQoKv8jJyn/IiYo/yMnKf8kKCr/Jiot/ygsLv8pLS//Jysu/yUpK/8gJSf/HCAi/xgcHv8WGhz/AIEAfv8AFhoc/xgcHv8cICL/ISUn/yYqLP8qLjD/LDAy/y0xM/8sMTP/Ky8x/youMP8oLC7/Jios/yUpK/8jJyn/ISUn/x8jJf8cICL/Gh4g/xgcHv8YHB7/GR0f/xsfIf8dISP/HyMl/yAkJv8fIyX/HCAi/xgcH/8UGBr/EBQW/w4SFP8BgQB+/wAOEhT/EBQW/xQYGv8ZHR//HiIk/yImKP8kKCr/JSkr/yUpK/8kKCr/IiYo/yAkJv8fIyX/HSEj/xwgIv8aHiD/Fxsd/xUZG/8TFxn/ERUX/xEVF/8TFxn/FRkb/xcbHv8aHiD/Gh8h/xoeIP8XGx3/ExcZ/w8TFf8LDxH/CQ0P/5iJpdb7tfKDAAAAAElFTkSuQmCC",autoSizes:"true",width:"1536",height:"542"})]),i[20]||(i[20]=s("ol",{start:"2"},[s("li",null,"在插件列表中激活我们的插件")],-1)),s("p",null,[t(p,{src:B,alt:"",thumbhash:"i/cBDID6eTpRZ4eYhrVrn5X3WA==",placeholderSrc:"data:image/png;base64,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KDj/JCg4/yQoOP8kKDj/JCg4/yQoN/8kKDf/JCg3/yQoN/8kKTf/JCk3/yQoN/8kKDf/JCg3/yQoOP8kKDj/JCg4/yQoOf8kKDn/Iyc5/yMnOv8jJzr/Iyc7/yInO/8iJjv/IiY8/yImPP8iJjz/IiY8/yImPP8AgQB+/wAjJzr/Iyc6/yMnOv8jJzr/Iyc5/yMnOf8jJzn/Iyg5/yQoOf8kKDn/JCg5/yQoOf8kKDn/JCg5/yQoOf8kKDn/Iyc5/yMnOf8jJzr/Iyc6/yMnOv8jJzv/IiY7/yImPP8iJjz/IiY8/yImPf8hJj3/ISU9/yElPv8hJT7/ISU+/wCBAH7/ACInO/8iJzv/Iyc7/yMnO/8jJzv/Iyc7/yMnO/8jJzr/Iyc6/yMnOv8jJzr/Iyc6/yMnOv8jJzr/Iyc6/yMnOv8jJzr/Iyc7/yMnO/8iJjv/IiY8/yImPP8iJjz/IiY9/yElPf8hJT7/ISU+/yElPv8hJT//ISU//yElP/8hJT//AIEAfv8AIiY8/yImPP8iJjz/IiY8/yImPP8iJjz/IiY7/yImO/8iJjv/Iic7/yMnO/8jJzv/Iyc7/yMnO/8jJzv/IiY7/yImO/8iJjz/IiY8/yImPP8iJj3/IiY9/yElPf8hJT7/ISU+/yElPv8hJT//ICU//yAkP/8gJED/ICRA/yAkQP8BgQB+/wAiJj3/IiY9/yImPP8iJjz/IiY8/yImPP8iJjz/IiY8/yImPP8iJjz/IiY7/yImO/8iJjv/IiY7/yImO/8iJjz/IiY8/yImPP8iJjz/IiY9/yImPf8hJT3/ISU+/yElPv8hJT//ISU//yAkP/8gJED/ICRA/yAkQP8gJED/ICRA/wTdZxvrf5CSAAAAAElFTkSuQmCC",autoSizes:"true",width:"1524",height:"964"})]),i[21]||(i[21]=l(`<h2 id="插件结构" tabindex="-1">插件结构 <a class="header-anchor" href="#插件结构" aria-label="Permalink to “插件结构”">​</a></h2><p>在案例插件的 <code>main.ts</code> 代码文件中可以看到：</p><div class="language-TypeScript"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">App</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Modal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Notice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PluginSettingTab</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Setting</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;obsidian&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * MyPlugin 拓展了 obsidian 的 Plugin（插件）实现</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * MyPlugin 同时是一个默认的导出对象，也就是说插件默认从这个位置挂载</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> MyPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 定义了设定的结构</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;">  settings</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> MyPluginSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // onload 是默认挂载插件时执行的事件函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> onload</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // TODO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // onunload 是插件卸载时执行的的事件函数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  onunload</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // TODO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * SampleSettingTab 拓展了 obsidian 的 PluginSettingTab（插件设定选项卡）实现</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> SampleSettingTab</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> PluginSettingTab</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div>`,3)),s("p",null,[i[8]||(i[8]=a("在 Obsidian 的",-1)),t(k,{href:"./Obsidian 官方文档参考.html"},{default:h(()=>[...i[7]||(i[7]=[a("Obsidian 官方文档参考",-1)])]),_:1}),i[9]||(i[9]=a("中可以得知：必须使用 ",-1)),i[10]||(i[10]=s("code",null,"export default class",-1)),i[11]||(i[11]=a(" 导出一个扩展 ",-1)),i[12]||(i[12]=s("code",null,"Plugin",-1)),i[13]||(i[13]=a(" 的默认类，所以我们的插件要基于拓展的 Plugin 类完成。",-1))]),i[22]||(i[22]=l(`<h2 id="开始编写" tabindex="-1">开始编写 <a class="header-anchor" href="#开始编写" aria-label="Permalink to “开始编写”">​</a></h2><h3 id="i18n-支持" tabindex="-1">i18n 支持 <a class="header-anchor" href="#i18n-支持" aria-label="Permalink to “i18n 支持”">​</a></h3><p>在 <code>src</code> 下创建 <code>locales</code> 目录，以及 <code>locales</code> 目录下的 <code>lang</code> 文件夹和 <code>helpers.ts</code> 文件。</p><ol><li>在 <code>helpers.ts</code> 文件中，我们将会构建 i18n 的主要函数 <code>t</code></li><li>在 <code>lang</code> 文件夹中，将会保存我们需要的本地化文件</li></ol><p>在 <code>locales/lang</code> 目录下创建我们的默认语言 English（英文）的本地化文件 <code>en.ts</code>，以及简体中文的本地化文件 <code>zh-cn.ts</code>，这两个文件的结构都一致：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>在 <code>helpers.ts</code> 中写下下面的内容：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">moment</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;obsidian&#39;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 导入 moment</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 导入本地化文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> en</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;./lang/en&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> zhCN</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;./lang/zh-cn&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 创建字典</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> localeMap</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> { [</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">k</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Partial</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> en</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; } </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    en</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;zh-cn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">zhCN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// obsidian 中的 moment.locale() 函数可以用于获取黑曜石的语言</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> locale</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> localeMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">moment</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">locale</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">@params</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> {String} str - i18n 本地化键值</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">@returns</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> 本地化字符串</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> t</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> keyof</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> en</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 如果 locale 不存在，则打印错误</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">locale</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Error: Plugin obsidian-asciinema-player locale not found&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">moment</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">locale</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 如果 locale 或是 locale[str] 未定义，自动回退到 en（英文）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">locale</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> locale</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> en</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>这样我们在任何一个地方导入 <code>helpers.ts</code> 就可以使用 i18n 了。</p>`,9)),t(y),t(r)])}const D=d(A,[["render",c]]);export{f as __pageData,D as default};
