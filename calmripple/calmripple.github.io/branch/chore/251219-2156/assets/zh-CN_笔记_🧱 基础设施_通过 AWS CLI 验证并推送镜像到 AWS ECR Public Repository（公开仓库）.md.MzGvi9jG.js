import{_ as o,ad as n,c as d,o as g,b as i,k as t,aE as h,a5 as a,m as e}from"./chunks/framework.BN_kmrHV.js";const w=JSON.parse('{"title":"é€šè¿‡ AWS CLI éªŒè¯å¹¶æ¨é€é•œåƒåˆ° AWS ECR","description":"","frontmatter":{"tags":["åŸºç¡€è®¾æ–½/äº‘æœåŠ¡å•†/äºšé©¬é€Šäº‘/AWS","åŸºç¡€è®¾æ–½/äº‘æœåŠ¡å•†/äºšé©¬é€Šäº‘","åŸºç¡€è®¾æ–½/å­˜å‚¨/é•œåƒä»“åº“/äºšé©¬é€Šäº‘/AWS/ECR","å‘½ä»¤è¡Œ/aws","å‘½ä»¤è¡Œ/docker","è¿ç»´/äº‘åŸç”Ÿ/Docker"]},"headers":[],"relativePath":"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/é€šè¿‡ AWS CLI éªŒè¯å¹¶æ¨é€é•œåƒåˆ° AWS ECR Public Repositoryï¼ˆå…¬å¼€ä»“åº“ï¼‰.md","filePath":"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/é€šè¿‡ AWS CLI éªŒè¯å¹¶æ¨é€é•œåƒåˆ° AWS ECR Public Repositoryï¼ˆå…¬å¼€ä»“åº“ï¼‰.md"}'),c={name:"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/é€šè¿‡ AWS CLI éªŒè¯å¹¶æ¨é€é•œåƒåˆ° AWS ECR Public Repositoryï¼ˆå…¬å¼€ä»“åº“ï¼‰.md"},y={class:"warning custom-block github-alert"},C={class:"footnotes"},F={class:"footnotes-list"},b={id:"fn1",class:"footnote-item"},u={id:"fn2",class:"footnote-item"};function A(f,s,B,m,E,S){const k=n("NolebasePageProperties"),l=n("VPNolebaseInlineLinkPreview"),p=n("NolebaseGitContributors"),r=n("NolebaseGitChangelog");return g(),d("div",null,[s[29]||(s[29]=i("h1",{id:"é€šè¿‡-aws-cli-éªŒè¯å¹¶æ¨é€é•œåƒåˆ°-aws-ecr",tabindex:"-1"},[a("é€šè¿‡ AWS CLI éªŒè¯å¹¶æ¨é€é•œåƒåˆ° AWS ECR "),i("a",{class:"header-anchor",href:"#é€šè¿‡-aws-cli-éªŒè¯å¹¶æ¨é€é•œåƒåˆ°-aws-ecr","aria-label":"Permalink to â€œé€šè¿‡ AWS CLI éªŒè¯å¹¶æ¨é€é•œåƒåˆ° AWS ECRâ€"},"â€‹")],-1)),t(k),i("div",y,[s[5]||(s[5]=h(`<p class="custom-block-title">è¯·å…ˆç¡®ä¿ä½ å·²ç»æ­£ç¡®é…ç½®äº† AWS çš„ SSO Profile</p><p></p><p>æƒ³è¦æ‰¾åˆ°æ˜¯å¦é…ç½®äº† Profileï¼Œå¯ä»¥é€šè¿‡</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> configure</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list-profiles</span></span></code></pre></div><p>å‘½ä»¤æ¥äº†è§£ï¼Œä¼šè¾“å‡ºè¿™æ ·çš„ç»“æœï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> configure</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list-profiles</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">default</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">example.org-dev</span></span></code></pre></div><p>ä¹Ÿå¯ä»¥æ ¹æ® <code>$HOME/.aws/config</code> æ–‡ä»¶æŸ¥é˜…é…ç½®ä¿¡æ¯ï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ~/.aws/config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[default]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">region</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">åœ°</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">åŒº</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[profile example.org-dev]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sso_session</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> example.org-dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sso_account_id</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">è´¦æˆ·</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sso_role_name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> AdministratorAccess</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">region</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">åœ°</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">åŒº</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[sso-session example.org-dev]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sso_start_url</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">IAM</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Identity</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Center</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> SSO</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ç™»å½•</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> å‰</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">ç¼€</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.awsapps.com/start#</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sso_region</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">åœ°</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">åŒº</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sso_registration_scopes</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sso:account:access</span></span></code></pre></div>`,8)),i("p",null,[s[1]||(s[1]=a("å¦‚æœè¿˜æ²¡æœ‰é…ç½®ï¼Œå¯ä»¥é€šè¿‡å‚è€ƒ ",-1)),t(l,{href:"https://docs.aws.amazon.com/cli/latest/userguide/sso-configure-profile-token.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[0]||(s[0]=[a("Configure the AWS CLI to use IAM Identity Center token provider credentials with automatic authentication refresh - AWS Command Line Interface",-1)])]),_:1}),s[2]||(s[2]=a(" æ–‡æ¡£è¿›è¡Œé…ç½®ã€‚",-1))]),i("p",null,[s[4]||(s[4]=a("æƒ³è¦äº†è§£æ›´å¤šæœ‰å…³ AWS CLI å’Œ SSO çš„ä¿¡æ¯ï¼Œå¯ä»¥é˜…è¯»è¿™ä»½æ–‡æ¡£ï¼š",-1)),t(l,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[3]||(s[3]=[a("Configure the AWS CLI to use AWS IAM Identity Center - AWS Command Line Interface",-1)])]),_:1})])]),s[30]||(s[30]=h('<div class="warning custom-block github-alert"><p class="custom-block-title">è¯·å…ˆç¡®ä¿ä½ å·²ç»ç™»å½•åˆ°äº†æœŸæœ›ä½¿ç”¨çš„ Profile çš„ SSO</p><p></p><p>æƒ³è¦ç¡®è®¤æ˜¯å¦å·²ç»ç™»å½•ï¼Œå¯ä»¥é€šè¿‡</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sts</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get-caller-identity</span></span></code></pre></div><p>å‘½ä»¤æ¥äº†è§£ï¼Œä¼šè¾“å‡ºè¿™æ ·çš„ç»“æœï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sts</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get-caller-identity</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    &quot;UserId&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&lt;ID&gt;&quot;,</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    &quot;Account&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&lt;Account ID&gt;&quot;,</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    &quot;Arn&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;arn:aws:iam::&lt;Account ID&gt;:user/&lt;Username&gt;&quot;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>ä¹Ÿå¯ä»¥é€šè¿‡</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sts</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get-caller-identity</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --query</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Account&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --profile</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Profile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> example.org-de</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">&quot;&lt;è´¦æˆ· ID&gt;&quot;</span></span></code></pre></div><p>æ¥æ£€æŸ¥<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã€‚</p></div><div class="tip custom-block github-alert"><p class="custom-block-title">å‡ºç°äº† `The security token included in the request is expired` é”™è¯¯ï¼Ÿ</p><p></p><p>å¦‚æœå‡ºç°äº†</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span>An error occurred (ExpiredToken) when calling the GetCallerIdentity operation: The security token included in the request is expired</span></span></code></pre></div><p>è¿™æ ·çš„é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">unset</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> AWS_SESSION_TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> AWS_ACCESS_KEY_ID</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> AWS_SECRET_ACCESS_KEY</span></span></code></pre></div><p>æ¸…ç©ºå¯èƒ½å­˜åœ¨çš„ä»»ä½•ç¯å¢ƒå˜é‡ï¼Œç„¶åé‡æ–°è½½å…¥ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼Œç„¶åå†æ¬¡ä½¿ç”¨</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sso</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> login</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --profile</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Profile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> å</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">ç§°</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre></div><p>ç™»å½•åå†æ¬¡æ£€æŸ¥</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sts</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get-caller-identity</span></span></code></pre></div><p>æ¥äº†è§£æ˜¯å¦ç™»å½•æˆåŠŸ</p></div><h2 id="æ¨é€åˆ°-public-repository-å…¬å¼€ä»“åº“" tabindex="-1">æ¨é€åˆ° Public Repositoryï¼ˆå…¬å¼€ä»“åº“ï¼‰ <a class="header-anchor" href="#æ¨é€åˆ°-public-repository-å…¬å¼€ä»“åº“" aria-label="Permalink to â€œæ¨é€åˆ° Public Repositoryï¼ˆå…¬å¼€ä»“åº“ï¼‰â€">â€‹</a></h2><p>é¦–å…ˆï¼Œåœ¨ ECR ä¸­å»ºç«‹ Repositoryï¼Œå¯ä»¥é€šè¿‡ AWS Consoleï¼ŒTerraformï¼Œæˆ–è€… AWS CLI å»ºç«‹ã€‚</p><div class="tip custom-block github-alert"><p class="custom-block-title">é€šè¿‡ AWS CLI å»ºç«‹ Repository</p><p></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ecr-public</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> create-repository</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --repository-name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ä»“åº“åç§°</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> --region</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">åœ°åŒº</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`</span></span></code></pre></div></div><p>æ¨é€å‰ï¼Œç™»å½• <code>docker</code> CLIï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ecr-public</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get-login-password</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --region</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> us-east-1</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> login</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --username</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> AWS</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --password-stdin</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> public.ecr.aws</span></span></code></pre></div><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p></p><p>æ³¨æ„ä¸Šé¢çš„å‘½ä»¤ä¸­çš„ï¼š</p><ol><li>å‘½ä»¤æ˜¯ <code>aws ecr-public</code> è€Œä¸æ˜¯å¹³æ—¶æ“ä½œ ECR çš„ <code>aws ecr</code><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ï¼›</li><li><code>--region us-east-1</code> ä¸è¦ä¿®æ”¹ä¸ºè‡ªå·± AWS è´¦æˆ·çš„åŒºåŸŸï¼Œæ‰€æœ‰çš„ Public &gt; &gt; Repositoryï¼ˆå…¬å¼€ä»“åº“ï¼‰éƒ½æ˜¯ AWS æ‰˜ç®¡åœ¨ <code>us-east-1</code> åŒºåŸŸä¸­çš„ã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2:1">[2:1]</a></sup></li></ol></div><p>ç„¶åç”¨ <code>docker</code> CLI ç›´æ¥é‡æ–°ç»™é•œåƒæ‰“ä¸€ä¸‹æ ‡ç­¾å°±å¥½äº†ï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tag</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> grafana:latest</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> public.ecr.aws/</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">è´¦æˆ·åˆ†é…ç»™çš„å‰ç¼€</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> IDï¼Œéœ€è¦åˆ°</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> AWS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Console</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ä¸Šè·å–ä¸€</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">ä¸‹</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/grafana:latest</span></span></code></pre></div><p>ç„¶å</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> public.ecr.aws/</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">è´¦æˆ·åˆ†é…ç»™çš„å‰ç¼€</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> IDï¼Œéœ€è¦åˆ°</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> AWS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Console</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ä¸Šè·å–ä¸€</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">ä¸‹</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/grafana:latest</span></span></code></pre></div><p>å°±å®Œæˆäº†ã€‚</p><h2 id="æ¨é€åˆ°-private-repository-ç§æœ‰ä»“åº“" tabindex="-1">æ¨é€åˆ° Private Repositoryï¼ˆç§æœ‰ä»“åº“ï¼‰ <a class="header-anchor" href="#æ¨é€åˆ°-private-repository-ç§æœ‰ä»“åº“" aria-label="Permalink to â€œæ¨é€åˆ° Private Repositoryï¼ˆç§æœ‰ä»“åº“ï¼‰â€">â€‹</a></h2><p>é¦–å…ˆï¼Œåœ¨ ECR ä¸­å»ºç«‹ Repositoryï¼Œå¯ä»¥é€šè¿‡ AWS Consoleï¼ŒTerraformï¼Œæˆ–è€… AWS CLI å»ºç«‹ã€‚</p><div class="tip custom-block github-alert"><p class="custom-block-title">é€šè¿‡ AWS CLI å»ºç«‹ Repository</p><p></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ecr</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> create-repository</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --repository-name</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ä»“åº“åç§°</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> --region</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">åœ°åŒº</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`</span></span></code></pre></div></div><p>æ¨é€å‰ï¼Œç™»å½• <code>docker</code> CLIï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span>aws ecr get-login-password --region &lt;åŒºåŸŸ&gt; | docker login --username AWS --password-stdin &lt;Account ID&gt;.dkr.ecr.&lt;åŒºåŸŸ&gt;.amazonaws.com</span></span></code></pre></div><p>ç„¶åç”¨ <code>docker</code> CLI ç›´æ¥é‡æ–°ç»™é•œåƒæ‰“ä¸€ä¸‹æ ‡ç­¾å°±å¥½äº†ï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tag</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> grafana:latest</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Account</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.dkr.ecr.</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">åŒº</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">åŸŸ</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.amazonaws.com/grafana:latest</span></span></code></pre></div><p>ç„¶å</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">Account</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.dkr.ecr.</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">åŒº</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">åŸŸ</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.amazonaws.com/grafana:latest</span></span></code></pre></div><p>å°±å®Œæˆäº†ã€‚</p><h2 id="å»¶ä¼¸é˜…è¯»" tabindex="-1">å»¶ä¼¸é˜…è¯» <a class="header-anchor" href="#å»¶ä¼¸é˜…è¯»" aria-label="Permalink to â€œå»¶ä¼¸é˜…è¯»â€">â€‹</a></h2>',24)),i("ul",null,[i("li",null,[t(l,{href:"https://towardsthecloud.com/aws-cli-switch-profiles",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[6]||(s[6]=[a("How to switch profiles using AWS CLI | Towards the Cloud",-1)])]),_:1})]),i("li",null,[t(l,{href:"https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ecr-public/index.html?highlight=ecr%20public",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[7]||(s[7]=[a("ecr-public â€” AWS CLI 2.15.25 Command Reference",-1)])]),_:1})]),i("li",null,[t(l,{href:"https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ecr/index.html?highlight=ecr",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[8]||(s[8]=[a("ecr â€” AWS CLI 2.15.25 Command Reference",-1)])]),_:1})])]),t(p),t(r),s[31]||(s[31]=i("hr",{class:"footnotes-sep"},null,-1)),i("section",C,[i("ol",F,[i("li",b,[i("p",null,[s[10]||(s[10]=a("æ˜¯ ",-1)),t(l,{href:"https://stackoverflow.com/questions/73029532/how-to-check-if-aws-cli-sso-is-logged-in",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[9]||(s[9]=[a("amazon web services - How to check if AWS CLI SSO is logged in - Stack Overflow",-1)])]),_:1}),s[11]||(s[11]=a(" ä»‹ç»åˆ°çš„æ–¹æ³•ã€‚ ",-1)),s[12]||(s[12]=i("a",{href:"#fnref1",class:"footnote-backref"},"â†©ï¸",-1))])]),i("li",u,[i("p",null,[s[15]||(s[15]=a("æˆ‘åŸæœ¬è‡ªä½œèªæ˜ï¼Œä»¥ä¸ºæ˜¯ AWS çš„æ–‡æ¡£ ",-1)),t(l,{href:"https://docs.aws.amazon.com/AmazonECR/latest/public/public-registries.html#public-registry-auth",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[13]||(s[13]=[a("Amazon ECR public registries - Amazon ECR Public",-1)])]),_:1}),s[16]||(s[16]=a("å†™é”™äº†ï¼Œåæ¥ä¸€ç›´éƒ½æ— æ³•æ‰¾åˆ°èƒ½å¤ŸéªŒè¯å’Œè·å– ",-1)),s[17]||(s[17]=i("code",null,"docker login",-1)),s[18]||(s[18]=a(" ä½¿ç”¨çš„å¯†ç ï¼Œç›´åˆ°æˆ‘åœ¨ ",-1)),t(l,{href:"https://stackoverflow.com/questions/69274998/could-not-connect-to-the-endpoint-url-https-api-ecr-public-xxxxxxxxx-amazona",target:"_blank",rel:"noreferrer"},{default:e(()=>[...s[14]||(s[14]=[a('amazon web services - Could not connect to the endpoint URL: "https://api.ecr-public.xxxxxxxxx.amazonaws.com/" - Stack Overflow',-1)])]),_:1}),s[19]||(s[19]=a(" çœ‹åˆ°æœ‰å¤§ä½¬åˆ†äº«è¯´æ˜¯å› ä¸º Public Repositoryï¼ˆå…¬å¼€ä»“åº“ï¼‰æ˜¯ä½¿ç”¨çš„ ",-1)),s[20]||(s[20]=i("code",null,"aws ecr-public",-1)),s[21]||(s[21]=a(" å‘½ä»¤è€Œä¸æ˜¯ ",-1)),s[22]||(s[22]=i("code",null,"aws ecr",-1)),s[23]||(s[23]=a(" å‘½ä»¤ï¼ŒåŒºåŸŸä¹Ÿåªæœ‰ ",-1)),s[24]||(s[24]=i("code",null,"us-east-1",-1)),s[25]||(s[25]=a(" æ‰æç„¶å¤§æ‚Ÿã€‚ ",-1)),s[26]||(s[26]=i("a",{href:"#fnref2",class:"footnote-backref"},"â†©ï¸",-1)),s[27]||(s[27]=a()),s[28]||(s[28]=i("a",{href:"#fnref2:1",class:"footnote-backref"},"â†©ï¸",-1))])])])])])}const D=o(c,[["render",A]]);export{w as __pageData,D as default};
