import{_ as k,ad as i,c as e,o as p,b as n,k as a,aE as r,a5 as d}from"./chunks/framework.BN_kmrHV.js";const b=JSON.parse('{"title":"2023 å¹´è½®æ›¿ mTLS è¯ä¹¦","description":"","frontmatter":{"tags":["æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/TLS/mTLS","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/TLS","æ•°å­¦/å¯†ç å­¦/è¯ä¹¦/PKI","å‘½ä»¤è¡Œ/openssl"]},"headers":[],"relativePath":"zh-CN/ç¬”è®°/ğŸ”’ PKI å…¬é’¥åŸºç¡€è®¾æ–½/è¯ä¹¦ç»´æŠ¤å’Œè½®æ›¿/è®°å½•/2023 å¹´è½®æ›¿ mTLS è¯ä¹¦.md","filePath":"zh-CN/ç¬”è®°/ğŸ”’ PKI å…¬é’¥åŸºç¡€è®¾æ–½/è¯ä¹¦ç»´æŠ¤å’Œè½®æ›¿/è®°å½•/2023 å¹´è½®æ›¿ mTLS è¯ä¹¦.md"}'),C={name:"zh-CN/ç¬”è®°/ğŸ”’ PKI å…¬é’¥åŸºç¡€è®¾æ–½/è¯ä¹¦ç»´æŠ¤å’Œè½®æ›¿/è®°å½•/2023 å¹´è½®æ›¿ mTLS è¯ä¹¦.md"};function g(y,s,c,o,E,F){const h=i("NolebasePageProperties"),l=i("NolebaseGitContributors"),t=i("NolebaseGitChangelog");return p(),e("div",null,[s[0]||(s[0]=n("h1",{id:"_2023-å¹´è½®æ›¿-mtls-è¯ä¹¦",tabindex:"-1"},[d("2023 å¹´è½®æ›¿ mTLS è¯ä¹¦ "),n("a",{class:"header-anchor",href:"#_2023-å¹´è½®æ›¿-mtls-è¯ä¹¦","aria-label":"Permalink to â€œ2023 å¹´è½®æ›¿ mTLS è¯ä¹¦â€"},"â€‹")],-1)),a(h),s[1]||(s[1]=r(`<p>è¿™æ¬¡ç»´æŠ¤ç”¨äº† 1Password å¸®å¿™å­˜å‚¨å’Œè¯»å– keyï¼Œä¸è¿‡ç”Ÿæˆ Private key çš„åŠŸèƒ½å°šåœ¨ beta é˜¶æ®µï¼Œæ‰€ä»¥è¿˜æ˜¯å…ˆç”¨ openssl ç”Ÿæˆã€‚</p><h3 id="åˆ›å»ºä»Šå¹´çš„æ–‡ä»¶å­˜å‚¨è·¯å¾„" tabindex="-1">åˆ›å»ºä»Šå¹´çš„æ–‡ä»¶å­˜å‚¨è·¯å¾„ <a class="header-anchor" href="#åˆ›å»ºä»Šå¹´çš„æ–‡ä»¶å­˜å‚¨è·¯å¾„" aria-label="Permalink to â€œåˆ›å»ºä»Šå¹´çš„æ–‡ä»¶å­˜å‚¨è·¯å¾„â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023</span></span></code></pre></div><h3 id="ç”Ÿæˆ-private-key-å’Œè¯ä¹¦ç­¾å‘è¯·æ±‚æ–‡ä»¶" tabindex="-1">ç”Ÿæˆ Private key å’Œè¯ä¹¦ç­¾å‘è¯·æ±‚æ–‡ä»¶ <a class="header-anchor" href="#ç”Ÿæˆ-private-key-å’Œè¯ä¹¦ç­¾å‘è¯·æ±‚æ–‡ä»¶" aria-label="Permalink to â€œç”Ÿæˆ Private key å’Œè¯ä¹¦ç­¾å‘è¯·æ±‚æ–‡ä»¶â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> genrsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4096</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> req</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -new</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -key</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.csr</span></span></code></pre></div><h3 id="åˆ›å»ºè¯ä¹¦æ‹“å±•æ–‡ä»¶" tabindex="-1">åˆ›å»ºè¯ä¹¦æ‹“å±•æ–‡ä»¶ <a class="header-anchor" href="#åˆ›å»ºè¯ä¹¦æ‹“å±•æ–‡ä»¶" aria-label="Permalink to â€œåˆ›å»ºè¯ä¹¦æ‹“å±•æ–‡ä»¶â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.ext</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">basicConstraints = CA:FALSE</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nsCertType = client, email</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nsComment = &quot;Ayaka Home Users Certificates&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">subjectKeyIdentifier = hash</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">authorityKeyIdentifier = keyid,issuer</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">keyUsage = critical, nonRepudiation, digitalSignature, keyEncipherment</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">extendedKeyUsage = clientAuth, emailProtection</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre></div><h3 id="è¯ä¹¦ç­¾å‘" tabindex="-1">è¯ä¹¦ç­¾å‘ <a class="header-anchor" href="#è¯ä¹¦ç­¾å‘" aria-label="Permalink to â€œè¯ä¹¦ç­¾å‘â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">op</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> read</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;op://&lt;secret reference&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/home_ca_intermediate_1.pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -req</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 365</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extfile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.ext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/home_ca_intermediate_1.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CAkey</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/home_ca_intermediate_1.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CAcreateserial</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/home_ca_intermediate_1.pem</span></span></code></pre></div><h3 id="åˆ›å»ºè¯ä¹¦é“¾-bundle" tabindex="-1">åˆ›å»ºè¯ä¹¦é“¾ bundle <a class="header-anchor" href="#åˆ›å»ºè¯ä¹¦é“¾-bundle" aria-label="Permalink to â€œåˆ›å»ºè¯ä¹¦é“¾ bundleâ€">â€‹</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> home_ca.crt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/home_ca_intermediate_1.crt</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/home_ca_intermediate_1_bundle.crt</span></span></code></pre></div><h3 id="ç”¨è¯ä¹¦é“¾-bundle-æ¥éªŒè¯è¯ä¹¦" tabindex="-1">ç”¨è¯ä¹¦é“¾ bundle æ¥éªŒè¯è¯ä¹¦ <a class="header-anchor" href="#ç”¨è¯ä¹¦é“¾-bundle-æ¥éªŒè¯è¯ä¹¦" aria-label="Permalink to â€œç”¨è¯ä¹¦é“¾ bundle æ¥éªŒè¯è¯ä¹¦â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> verify</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CAfile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/home_ca_intermediate_1_bundle.crt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.crt</span></span></code></pre></div><h3 id="éªŒè¯æˆåŠŸåæ‰“åŒ…ä¸º-p12-æ ¼å¼çš„æ–‡ä»¶æ–¹ä¾¿å¯¼å…¥å¯¼å‡ºå’Œå®‰è£…" tabindex="-1">éªŒè¯æˆåŠŸåæ‰“åŒ…ä¸º .p12 æ ¼å¼çš„æ–‡ä»¶æ–¹ä¾¿å¯¼å…¥å¯¼å‡ºå’Œå®‰è£… <a class="header-anchor" href="#éªŒè¯æˆåŠŸåæ‰“åŒ…ä¸º-p12-æ ¼å¼çš„æ–‡ä»¶æ–¹ä¾¿å¯¼å…¥å¯¼å‡ºå’Œå®‰è£…" aria-label="Permalink to â€œéªŒè¯æˆåŠŸåæ‰“åŒ…ä¸º .p12 æ ¼å¼çš„æ–‡ä»¶æ–¹ä¾¿å¯¼å…¥å¯¼å‡ºå’Œå®‰è£…â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pkcs12</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -export</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -inkey</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -certfile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/home_ca_intermediate_1_bundle.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/neko@ayaka.moe.p12</span></span></code></pre></div><p>æˆåŠŸå¯¼å…¥åˆ° KeyStore é‡Œé¢ä¹‹åè®°å¾—åˆ é™¤ç§é’¥å’Œè¯ä¹¦ç­¾å‘è¯·æ±‚æ–‡ä»¶</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/neko/2023/client.csr</span></span></code></pre></div><h2 id="å¿«é€Ÿè„šæœ¬" tabindex="-1">å¿«é€Ÿè„šæœ¬ <a class="header-anchor" href="#å¿«é€Ÿè„šæœ¬" aria-label="Permalink to â€œå¿«é€Ÿè„šæœ¬â€">â€‹</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/usr/bin/env bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">read</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;ç”¨æˆ·åï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> USERNAME</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">read</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;é‚®ç®±ï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> EMAIL</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">read</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;CA Bundle åç§°ï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> INTERMEDIATE_CA_BUNDLE_NAME</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">read</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;ä¸­é—´ CA è¯ä¹¦åï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> INTERMEDIATE_CA_NAME</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">read</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;1Password CLI CA Secret Referenceï¼š&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ONE_PASSWORD_CLI_CA_SECRET_REFERENCE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">CURRENT_YEAR</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">date</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> +%Y</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;åˆ›å»ºç”¨æˆ·ç›®å½•...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;ç”Ÿæˆç”¨æˆ·ç§é’¥...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> genrsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4096</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;ç”Ÿæˆç”¨æˆ·è¯ä¹¦ç­¾å‘è¯·æ±‚æ–‡ä»¶...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.cnf</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">[req]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">prompt = no</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">distinguished_name = req_distinguished_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">[req_distinguished_name]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">C = CN</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ST = Shanghai</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">L = Shanghai</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">O = Ayaka Home Users</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">OU = Users</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">CN = </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$EMAIL</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">emailAddress = </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$EMAIL</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> req</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -new</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -key</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.csr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;åˆ›å»ºè¯ä¹¦æ‹“å±•æ–‡ä»¶...&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.ext</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">basicConstraints = CA:FALSE</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nsCertType = client, email</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nsComment = &quot;Ayaka Home Users Certificates&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">subjectKeyIdentifier = hash</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">authorityKeyIdentifier = keyid,issuer</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">keyUsage = critical, nonRepudiation, digitalSignature, keyEncipherment</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">extendedKeyUsage = clientAuth, emailProtection</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;è¯ä¹¦ç­¾å‘...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">op</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> read</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $ONE_PASSWORD_CLI_CA_SECRET_REFERENCE</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$INTERMEDIATE_CA_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -req</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -days</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 365</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -sha256</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -extfile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.ext</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.csr</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CA</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$INTERMEDIATE_CA_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CAkey</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$INTERMEDIATE_CA_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CAcreateserial</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$INTERMEDIATE_CA_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.pem</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;éªŒè¯è¯ä¹¦...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> verify</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -CAfile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$INTERMEDIATE_CA_BUNDLE_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.crt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.crt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;æ‰“åŒ…è¯ä¹¦...&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pkcs12</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -export</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -inkey</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -certfile</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> intermediates/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$INTERMEDIATE_CA_BUNDLE_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$EMAIL</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.p12</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.pem</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> clients/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$CURRENT_YEAR</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/client.csr</span></span></code></pre></div>`,19)),a(l),a(t)])}const _=k(C,[["render",g]]);export{b as __pageData,_ as default};
