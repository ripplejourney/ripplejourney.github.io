import{_ as d,ad as t,c as g,o,b as i,k as n,aE as k,a5 as a,m as h}from"./chunks/framework.BN_kmrHV.js";const f=JSON.parse('{"title":"ä¸ºå®‰è£… CNI ä½¿ç”¨ Kubeadm å‡†å¤‡ä¸€ä¸ª Kubernetes é›†ç¾¤","description":"","frontmatter":{"tags":["è¿ç»´/äº‘åŸç”Ÿ/Kubernetes","è¿ç»´/äº‘åŸç”Ÿ/Kubernetes/K8s","å¼€å‘/äº‘åŸç”Ÿ/Kubernetes","å¼€å‘/äº‘åŸç”Ÿ/Kubernetes/K8s","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux/å‘½ä»¤è¡Œ","æ“ä½œç³»ç»Ÿ/Linux","å¼€å‘/äº‘åŸç”Ÿ/å®¹å™¨ç½‘ç»œæ¥å£/CNI","å‘½ä»¤è¡Œ/kubeadm","è½¯ä»¶/äº‘åŸç”Ÿ/kubeadm","å‘½ä»¤è¡Œ/kubectl","è½¯ä»¶/äº‘åŸç”Ÿ/kubelet","è½¯ä»¶/äº‘åŸç”Ÿ/kubectl","è¿ç»´","å¼€å‘/æ ‡è®°è¯­è¨€/YAML"]},"headers":[],"relativePath":"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/ä¸ºå®‰è£… CNI ä½¿ç”¨ Kubeadm å‡†å¤‡ä¸€ä¸ª Kubernetes é›†ç¾¤.md","filePath":"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/ä¸ºå®‰è£… CNI ä½¿ç”¨ Kubeadm å‡†å¤‡ä¸€ä¸ª Kubernetes é›†ç¾¤.md"}'),y={name:"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/ä¸ºå®‰è£… CNI ä½¿ç”¨ Kubeadm å‡†å¤‡ä¸€ä¸ª Kubernetes é›†ç¾¤.md"},C={tabindex:"0"};function c(F,s,b,u,B,A){const e=t("NolebasePageProperties"),l=t("VPNolebaseInlineLinkPreview"),p=t("NolebaseGitContributors"),r=t("NolebaseGitChangelog");return o(),g("div",null,[s[23]||(s[23]=i("h1",{id:"ä¸ºå®‰è£…-cni-ä½¿ç”¨-kubeadm-å‡†å¤‡ä¸€ä¸ª-kubernetes-é›†ç¾¤",tabindex:"-1"},[a("ä¸ºå®‰è£… CNI ä½¿ç”¨ Kubeadm å‡†å¤‡ä¸€ä¸ª Kubernetes é›†ç¾¤ "),i("a",{class:"header-anchor",href:"#ä¸ºå®‰è£…-cni-ä½¿ç”¨-kubeadm-å‡†å¤‡ä¸€ä¸ª-kubernetes-é›†ç¾¤","aria-label":"Permalink to â€œä¸ºå®‰è£… CNI ä½¿ç”¨ Kubeadm å‡†å¤‡ä¸€ä¸ª Kubernetes é›†ç¾¤â€"},"â€‹")],-1)),n(e),s[24]||(s[24]=i("h3",{id:"æ–‡æ¡£å…¼å®¹æ€§",tabindex:"-1"},[a("æ–‡æ¡£å…¼å®¹æ€§ "),i("a",{class:"header-anchor",href:"#æ–‡æ¡£å…¼å®¹æ€§","aria-label":"Permalink to â€œæ–‡æ¡£å…¼å®¹æ€§â€"},"â€‹")],-1)),i("table",C,[s[9]||(s[9]=i("thead",null,[i("tr",null,[i("th",null,"ä¸»ä½“"),i("th",null,"ç‰ˆæœ¬å·"),i("th",null,"æ–‡æ¡£åœ°å€ï¼ˆå¦‚æœæœ‰ï¼‰")])],-1)),i("tbody",null,[s[6]||(s[6]=i("tr",null,[i("td",null,"Debian"),i("td",null,"11"),i("td")],-1)),i("tr",null,[s[1]||(s[1]=i("td",null,"Kubernetes",-1)),s[2]||(s[2]=i("td",null,"1.28",-1)),i("td",null,[n(l,{href:"https://v1-28.docs.kubernetes.io/",target:"_blank",rel:"noreferrer"},{default:h(()=>[...s[0]||(s[0]=[a("https://v1-28.docs.kubernetes.io/",-1)])]),_:1})])]),i("tr",null,[s[4]||(s[4]=i("td",null,"Docker",-1)),s[5]||(s[5]=i("td",null,"24.0.2",-1)),i("td",null,[n(l,{href:"https://docs.docker.com/",target:"_blank",rel:"noreferrer"},{default:h(()=>[...s[3]||(s[3]=[a("https://docs.docker.com/",-1)])]),_:1})])]),s[7]||(s[7]=i("tr",null,[i("td",null,"containerd"),i("td",null,"1.7.6"),i("td")],-1)),s[8]||(s[8]=i("tr",null,[i("td",null,"Linux kernel"),i("td",null,"5.10.0"),i("td")],-1))])]),s[25]||(s[25]=i("h2",{id:"å…ˆå†³æ¡ä»¶",tabindex:"-1"},[a("å…ˆå†³æ¡ä»¶ "),i("a",{class:"header-anchor",href:"#å…ˆå†³æ¡ä»¶","aria-label":"Permalink to â€œå…ˆå†³æ¡ä»¶â€"},"â€‹")],-1)),i("ul",null,[i("li",null,[n(l,{href:"/zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/é‡ç½® Kubernetes é›†ç¾¤.html"},{default:h(()=>[...s[10]||(s[10]=[a("é‡ç½® Kubernetes é›†ç¾¤",-1)])]),_:1})]),i("li",null,[n(l,{href:"/zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº.html"},{default:h(()=>[...s[11]||(s[11]=[a("å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº",-1)])]),_:1})])]),s[26]||(s[26]=k(`<h2 id="å‡†å¤‡é…ç½®æ–‡ä»¶" tabindex="-1">å‡†å¤‡é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#å‡†å¤‡é…ç½®æ–‡ä»¶" aria-label="Permalink to â€œå‡†å¤‡é…ç½®æ–‡ä»¶â€">â€‹</a></h2><p>æˆ‘ä»¬ç”¨é…ç½®æ–‡ä»¶çš„å½¢å¼æ¥å®‰è£…å’Œéƒ¨ç½² Kubernetes é›†ç¾¤ï¼Œé¦–å…ˆæˆ‘ä»¬äº§å‡ºä¸€ä¸‹ éƒ¨ç½²ç”¨çš„é…ç½®æ–‡ä»¶ï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> print</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> init-defaults</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --kubeconfig</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ClusterConfiguration</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm.yml</span></span></code></pre></div><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-102" id="tab-103" checked><label data-title="é«˜äº®ä¿®æ”¹çš„éƒ¨åˆ†" for="tab-103">é«˜äº®ä¿®æ”¹çš„éƒ¨åˆ†</label><input type="radio" name="group-102" id="tab-104"><label data-title="é«˜äº®ä¸é»˜è®¤é…ç½®å¯¹æ¯”åçš„å·®å¼‚" for="tab-104">é«˜äº®ä¸é»˜è®¤é…ç½®å¯¹æ¯”åçš„å·®å¼‚</label></div><div class="blocks"><div class="language-yaml active"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light one-dark-pro has-highlighted" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">InitConfiguration</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">bootstrapTokens</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">groups</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">system:bootstrappers:kubeadm:default-node-token</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  token</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">abcdef.0123456789abcdef</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  ttl</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">24h0m0s</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  usages</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">signing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">authentication</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">localAPIEndpoint</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è¿™é‡Œå¡«å†™æ§åˆ¶å¹³é¢èŠ‚ç‚¹çš„ IP</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  advertiseAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10.24.0.2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  bindPort</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">6443</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">nodeRegistration</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è®°å¾—ç¡®è®¤ä¸€ä¸‹æ˜¯å¦æ˜¯ä½¿ç”¨çš„ containerd å’Œ UNIX Socket æ˜¯å¦é…ç½®åˆ°äº†è¿™ä¸ªè·¯å¾„ä¸Š</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  criSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">unix:///var/run/containerd/containerd.sock</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  imagePullPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">IfNotPresent</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è¿™é‡Œå¡«å†™æˆ‘ä»¬çš„èŠ‚ç‚¹ 1 çš„åå­—</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">node1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  taints</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">null</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#ABB2BF;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ClusterConfiguration</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">apiServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  timeoutForControlPlane</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">20m0s</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç¨å¾®è°ƒå¤§ä¸€äº› </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€ä¸‹ä½ æœŸæœ›åœ¨ç”Ÿæˆ Kubernetes API Server</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è¯ä¹¦çš„æ—¶å€™é¢å¤–æ”¯æŒçš„ SANï¼ˆSubject Alternative Namesï¼‰</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  certSANs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">node01</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   - </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10.24.0.2</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">k8s.ihome.cat</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">certificatesDir</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/etc/kubernetes/pki</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">clusterName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">homelab-kubernetes-1</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # å¯ä»¥æ”¹æˆè‡ªå·±æœŸæœ›çš„é›†ç¾¤åå­— </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">controllerManager</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">dns</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">etcd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  local</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">    dataDir</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/var/lib/etcd</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">imageRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">registry.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">kubernetesVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1.28.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">networking</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # é€‰æ‹©ä¸€ä¸ªå–œæ¬¢çš„ Pod ä½¿ç”¨çš„ CIDRï¼Œä¹‹åå®‰è£… Cilium çš„æ—¶å€™ä¹Ÿä¼šç”¨åˆ°</span></span>
<span class="line highlighted"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  podSubnet</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">10.244.0.0/16</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  dnsDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">cluster.local</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  serviceSubnet</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">10.96.0.0/12</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">scheduler</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {}</span></span></code></pre></div><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light one-dark-pro has-diff" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">InitConfiguration</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">bootstrapTokens</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">groups</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">system:bootstrappers:kubeadm:default-node-token</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  token</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">abcdef.0123456789abcdef</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  ttl</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">24h0m0s</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  usages</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">signing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">authentication</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">localAPIEndpoint</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è¿™é‡Œå¡«å†™æ§åˆ¶å¹³é¢èŠ‚ç‚¹çš„ IP</span></span>
<span class="line diff remove"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  advertiseAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1.2.3.4</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  advertiseAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10.24.0.2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  bindPort</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">6443</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">nodeRegistration</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è®°å¾—ç¡®è®¤ä¸€ä¸‹æ˜¯å¦æ˜¯ä½¿ç”¨çš„ containerd å’Œ UNIX Socket æ˜¯å¦é…ç½®åˆ°äº†è¿™ä¸ªè·¯å¾„ä¸Š</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  criSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">unix:///var/run/containerd/containerd.sock</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  imagePullPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">IfNotPresent</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è¿™é‡Œå¡«å†™æˆ‘ä»¬çš„èŠ‚ç‚¹ 1 çš„åå­—</span></span>
<span class="line diff remove"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">node</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">node1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  taints</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">null</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#ABB2BF;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ClusterConfiguration</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">apiServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line diff remove"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  timeoutForControlPlane</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">4m0s</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç¨å¾®è°ƒå¤§ä¸€äº› </span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  timeoutForControlPlane</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">20m0s</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç¨å¾®è°ƒå¤§ä¸€äº› </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€ä¸‹ä½ æœŸæœ›åœ¨ç”Ÿæˆ Kubernetes API Server</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è¯ä¹¦çš„æ—¶å€™é¢å¤–æ”¯æŒçš„ SANï¼ˆSubject Alternative Namesï¼‰</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  certSANs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">node01</span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   - </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10.24.0.2</span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">   - </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">k8s.ihome.cat</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">certificatesDir</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/etc/kubernetes/pki</span></span>
<span class="line diff remove"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">clusterName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">kubernetes</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">clusterName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">homelab-kubernetes-1</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # å¯ä»¥æ”¹æˆè‡ªå·±æœŸæœ›çš„é›†ç¾¤åå­— </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">controllerManager</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">dns</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">etcd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  local</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">    dataDir</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/var/lib/etcd</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">imageRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">registry.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">kubernetesVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1.28.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">networking</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # é€‰æ‹©ä¸€ä¸ªå–œæ¬¢çš„ Pod ä½¿ç”¨çš„ CIDRï¼Œä¹‹åå®‰è£… Cilium çš„æ—¶å€™ä¹Ÿä¼šç”¨åˆ°</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  podSubnet</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">10.244.0.0/16</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  dnsDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">cluster.local</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  serviceSubnet</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">10.96.0.0/12</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">scheduler</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {}</span></span></code></pre></div></div></div><h2 id="å‡†å¤‡é•œåƒ" tabindex="-1">å‡†å¤‡é•œåƒ <a class="header-anchor" href="#å‡†å¤‡é•œåƒ" aria-label="Permalink to â€œå‡†å¤‡é•œåƒâ€">â€‹</a></h2><p>ç„¶åæˆ‘ä»¬å¯ä»¥åˆ—å‡ºä¸€ä¸‹æˆ‘ä»¬éœ€è¦çš„é•œåƒï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> images</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm.yml</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> images</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm.yml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">registry.k8s.io/kube-apiserver:v1.28.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">registry.k8s.io/kube-controller-manager:v1.28.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">registry.k8s.io/kube-scheduler:v1.28.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">registry.k8s.io/kube-proxy:v1.28.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">registry.k8s.io/pause:3.9</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">registry.k8s.io/etcd:3.5.9-0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">registry.k8s.io/coredns/coredns:v1.10.1</span></span></code></pre></div><p>æå‰é¢„å¤‡å¥½é•œåƒï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> images</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm.yml</span></span></code></pre></div><h2 id="å¼€å§‹éƒ¨ç½²" tabindex="-1">å¼€å§‹éƒ¨ç½² <a class="header-anchor" href="#å¼€å§‹éƒ¨ç½²" aria-label="Permalink to â€œå¼€å§‹éƒ¨ç½²â€">â€‹</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config=kubeadm.yml</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --upload-certs</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --skip-phases=addon/kube-proxy</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --v=5</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm-init.log</span></span></code></pre></div>`,12)),i("ul",null,[s[18]||(s[18]=i("li",null,[i("code",null,"--upload-certs"),a("ï¼šæ–¹ä¾¿åç»­åŒæ­¥å’ŒåŠ å…¥èŠ‚ç‚¹")],-1)),i("li",null,[s[13]||(s[13]=i("code",null,"--skip-phases=addon/kube-proxy",-1)),s[14]||(s[14]=a("ï¼šæ ¹æ® Cilium çš„æ–‡æ¡£ ",-1)),n(l,{href:"https://docs.cilium.io/en/stable/installation/k8s-install-kubeadm/",target:"_blank",rel:"noreferrer"},{default:h(()=>[...s[12]||(s[12]=[a("Installation using kubeadm â€” Cilium 1.14.2 documentation",-1)])]),_:1}),s[15]||(s[15]=a(" è¦æ±‚çš„æ·»åŠ å‚æ•° ",-1)),s[16]||(s[16]=i("code",null,"--skip-phases",-1)),s[17]||(s[17]=a("ï¼Œå¦‚æœä½ å®‰è£…çš„æ˜¯ Calico æˆ–è€…å…¶ä»–çš„ CNIï¼Œè¯·å¤šé˜…è¯»å’Œå‚è€ƒä»–ä»¬çš„æ–‡æ¡£",-1))]),s[19]||(s[19]=i("li",null,[i("code",null,"--v=5"),a("ï¼šå°†è¾“å‡ºç­‰çº§è°ƒåˆ° 5ï¼Œè¿™æ ·çš„è¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸­é€”é‡åˆ°äº†ä»€ä¹ˆæŠ¥é”™ï¼Œå¯ä»¥çœ‹åˆ°å‡†ç¡®çš„è°ƒç”¨æ ˆ")],-1))]),s[27]||(s[27]=k(`<p>æ‰§è¡Œï¼š</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --config=kubeadm.yml</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --upload-certs</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --skip-phases=addon/kube-proxy</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --v=5</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm-init.log</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Your</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Kubernetes</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> control-plane</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> initialized</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> successfully!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">To</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> using</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cluster,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> need</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> following</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> regular</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> user:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.kube</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/kubernetes/admin.conf</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.kube/config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> chown</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">id</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">id</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -g</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.kube/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Alternatively,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> if</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> are</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> user,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> can</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> KUBECONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">etc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">kubernetes</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">admin</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">You</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> should</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> now</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> deploy</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pod</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cluster.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Run</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;kubectl apply -f [podnetwork].yaml&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> options</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> listed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> at:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Then</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> can</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> join</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> any</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> worker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> running</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> following</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> each</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> root:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> join</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10.24.0.2:6443</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --token</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">åŠ å…¥é›†ç¾¤ä½¿ç”¨çš„</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> TOKE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">N</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">	--discovery-token-ca-cert-hash</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sha256:365eab797f1503ad6d24809ad253323aa9c6990069d8b3b367078bdf188e0296</span></span></code></pre></div><p>å½“æˆ‘ä»¬çœ‹åˆ° <code>Your Kubernetes control-plane has initialized successfully!</code> å­—æ ·ä¹‹åå°±ä»£è¡¨æˆ‘ä»¬å‡†å¤‡å¥½äº†ã€‚</p><h2 id="åˆ†å‘å‡­æ®" tabindex="-1">åˆ†å‘å‡­æ® <a class="header-anchor" href="#åˆ†å‘å‡­æ®" aria-label="Permalink to â€œåˆ†å‘å‡­æ®â€">â€‹</a></h2><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æŠŠ <code>kubectl</code> éœ€è¦çš„å‡­æ®æ–‡ä»¶å¤åˆ¶ç»™ç”¨æˆ·äº†ã€‚</p><div class="warning custom-block github-alert"><p class="custom-block-title">âš ï¸ æ³¨æ„</p><p>è¿™æ ·çš„æ“ä½œä»…é€‚ç”¨äºéƒ¨ç½²å’Œç»´æŠ¤ Kubernetes é›†ç¾¤çš„ç¬¬ä¸€ä¸ªç”¨æˆ·ï¼Œæˆ–è€… root ç”¨æˆ·ï¼Œå¯¹äºå…¶ä»–ç”¨æˆ·è€Œè¨€ï¼Œè¯·å‚ç…§ Kubernetes æ–‡æ¡£ä¸­å¯¹äºå¤šç”¨æˆ·å’Œæˆæƒçš„æè¿°æ¥åˆ†é…æƒé™ã€‚</p></div><h3 id="ä»…-root-ç”¨æˆ·ä½¿ç”¨æˆ–æ™®é€šç”¨æˆ·éœ€è¦-sudoer-æƒé™æ‰èƒ½ä½¿ç”¨" tabindex="-1">ä»… root ç”¨æˆ·ä½¿ç”¨æˆ–æ™®é€šç”¨æˆ·éœ€è¦ sudoer æƒé™æ‰èƒ½ä½¿ç”¨ <a class="header-anchor" href="#ä»…-root-ç”¨æˆ·ä½¿ç”¨æˆ–æ™®é€šç”¨æˆ·éœ€è¦-sudoer-æƒé™æ‰èƒ½ä½¿ç”¨" aria-label="Permalink to â€œä»… root ç”¨æˆ·ä½¿ç”¨æˆ–æ™®é€šç”¨æˆ·éœ€è¦ sudoer æƒé™æ‰èƒ½ä½¿ç”¨â€">â€‹</a></h3><p>æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š</p><ol><li>å¤åˆ¶ä¸º <code>/root/.kube/config</code></li><li>æˆ‘ä»¬åœ¨ root ç”¨æˆ·ä¸‹é…ç½® <code>.bash_profile</code> æˆ–è€… <code>.zshrc</code></li></ol><h4 id="å¤åˆ¶ä¸º-root-kube-config" tabindex="-1">å¤åˆ¶ä¸º <code>/root/.kube/config</code> <a class="header-anchor" href="#å¤åˆ¶ä¸º-root-kube-config" aria-label="Permalink to â€œå¤åˆ¶ä¸º /root/.kube/configâ€">â€‹</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /root/.kube</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/kubernetes/admin.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /root/.kube/config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> chown</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> root:root</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /root/.kube/config</span></span></code></pre></div><h4 id="å¤ç”¨é…ç½®æ–‡ä»¶è·¯å¾„" tabindex="-1">å¤ç”¨é…ç½®æ–‡ä»¶è·¯å¾„ <a class="header-anchor" href="#å¤ç”¨é…ç½®æ–‡ä»¶è·¯å¾„" aria-label="Permalink to â€œå¤ç”¨é…ç½®æ–‡ä»¶è·¯å¾„â€">â€‹</a></h4><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-182" id="tab-183" checked><label data-title="bash" for="tab-183">bash</label><input type="radio" name="group-182" id="tab-184"><label data-title="zsh" for="tab-184">zsh</label></div><div class="blocks"><div class="language-shell active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;export KUBECONFIG=/etc/kubernetes/admin.conf&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .bashrc</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .bashrc</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;export KUBECONFIG=/etc/kubernetes/admin.conf&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .zshrc</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> .zshrc</span></span></code></pre></div></div></div><h3 id="ä»…æˆæƒç”¨æˆ·ä½¿ç”¨" tabindex="-1">ä»…æˆæƒç”¨æˆ·ä½¿ç”¨ <a class="header-anchor" href="#ä»…æˆæƒç”¨æˆ·ä½¿ç”¨" aria-label="Permalink to â€œä»…æˆæƒç”¨æˆ·ä½¿ç”¨â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.kube</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/kubernetes/admin.conf</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.kube/config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> chown</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$USERGROUP</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $USERNAME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.kube/config</span></span></code></pre></div><h3 id="ä»…æˆ‘ä»¬è‡ªå·±ä½¿ç”¨" tabindex="-1">ä»…æˆ‘ä»¬è‡ªå·±ä½¿ç”¨ <a class="header-anchor" href="#ä»…æˆ‘ä»¬è‡ªå·±ä½¿ç”¨" aria-label="Permalink to â€œä»…æˆ‘ä»¬è‡ªå·±ä½¿ç”¨â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.kube</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/kubernetes/admin.conf</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.kube/config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> chown</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">id</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">id</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -g</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/.kube/config</span></span></code></pre></div><h2 id="éªŒè¯å®‰è£…" tabindex="-1">éªŒè¯å®‰è£… <a class="header-anchor" href="#éªŒè¯å®‰è£…" aria-label="Permalink to â€œéªŒè¯å®‰è£…â€">â€‹</a></h2><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä½¿ç”¨ <code>kubectl</code> éªŒè¯å®‰è£…ï¼š</p><h3 id="æŸ¥çœ‹-node-åˆ—è¡¨" tabindex="-1">æŸ¥çœ‹ Node åˆ—è¡¨ <a class="header-anchor" href="#æŸ¥çœ‹-node-åˆ—è¡¨" aria-label="Permalink to â€œæŸ¥çœ‹ Node åˆ—è¡¨â€">â€‹</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-203" id="tab-204" checked><label data-title="ä»… root ç”¨æˆ·ä½¿ç”¨" for="tab-204">ä»… root ç”¨æˆ·ä½¿ç”¨</label><input type="radio" name="group-203" id="tab-205"><label data-title="ä»…æˆ‘ä»¬è‡ªå·±ä½¿ç”¨" for="tab-205">ä»…æˆ‘ä»¬è‡ªå·±ä½¿ç”¨</label></div><div class="blocks"><div class="language-shell active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nodes</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nodes</span></span></code></pre></div></div></div><p>å¦‚æœçœ‹åˆ°è¾“å‡ºäº† <code>NotReady</code>ï¼Œæ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºæˆ‘ä»¬è·³è¿‡äº† <code>kube-proxy</code> å®‰è£…å’Œæš‚æ—¶æ²¡æœ‰é…ç½® CNIï¼Œå¦‚æœä½ ç°åœ¨é€šè¿‡</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet</span></span></code></pre></div><p>è§‚å¯Ÿ <code>kubelet</code> çš„æ—¥å¿—è¾“å‡ºçš„è¯èƒ½å¤Ÿå‘ç°å®ƒä¼šæŠ¥é”™è¯´ <code>cni plugin not initialized</code>ã€‚æˆ‘ä»¬ä¹‹åå®‰è£…åƒæ˜¯ Cilium æˆ–è€… Calico è¿™æ ·çš„ CNI æ’ä»¶ä¹‹åå°±ä¼šæ¢å¤æ­£å¸¸äº†ã€‚</p><h3 id="æŸ¥çœ‹-pod-åˆ—è¡¨" tabindex="-1">æŸ¥çœ‹ Pod åˆ—è¡¨ <a class="header-anchor" href="#æŸ¥çœ‹-pod-åˆ—è¡¨" aria-label="Permalink to â€œæŸ¥çœ‹ Pod åˆ—è¡¨â€">â€‹</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-217" id="tab-218" checked><label data-title="ä»… root ç”¨æˆ·ä½¿ç”¨" for="tab-218">ä»… root ç”¨æˆ·ä½¿ç”¨</label><input type="radio" name="group-217" id="tab-219"><label data-title="ä»…æˆ‘ä»¬è‡ªå·±ä½¿ç”¨" for="tab-219">ä»…æˆ‘ä»¬è‡ªå·±ä½¿ç”¨</label></div><div class="blocks"><div class="language-shell active"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pods</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-system</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kube-system</span></span></code></pre></div></div></div><h2 id="æ·»åŠ å…¶ä»–èŠ‚ç‚¹" tabindex="-1">æ·»åŠ å…¶ä»–èŠ‚ç‚¹ <a class="header-anchor" href="#æ·»åŠ å…¶ä»–èŠ‚ç‚¹" aria-label="Permalink to â€œæ·»åŠ å…¶ä»–èŠ‚ç‚¹â€">â€‹</a></h2><p>æ¥ä¸‹æ¥å¯ä»¥åœ¨åˆ«çš„èŠ‚ç‚¹æœºå™¨ä¸Šæ‰§è¡Œå®ƒåœ¨ä¸Šé¢çš„ç»“æœä¸­è¾“å‡ºçš„</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> join</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10.24.0.2:6443</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --token</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">åŠ å…¥é›†ç¾¤ä½¿ç”¨çš„</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> TOKE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">N</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">	--discovery-token-ca-cert-hash</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sha256:365eab797f1503ad6d24809ad253323aa9c6990069d8b3b367078bdf188e0296</span></span></code></pre></div><p>å‘½ä»¤æ¥åŠ å…¥åˆ°é›†ç¾¤ã€‚</p>`,30)),i("p",null,[s[21]||(s[21]=a("å½“ç„¶å¦‚æœä½ é”™è¿‡äº†è¿™æ¡æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡",-1)),n(l,{href:"/zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/åˆ›å»ºåŠ å…¥é›†ç¾¤çš„ Token å¹¶è¾“å‡ºå‘½ä»¤.html"},{default:h(()=>[...s[20]||(s[20]=[a("åˆ›å»ºåŠ å…¥é›†ç¾¤çš„ Token å¹¶è¾“å‡ºå‘½ä»¤",-1)])]),_:1}),s[22]||(s[22]=a("ä¸­æåˆ°çš„ï¼š",-1))]),s[28]||(s[28]=k('<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> token</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --print-join-command</span></span></code></pre></div><p>æ¥åˆ›å»ºå’Œæ‰“å°åŠ å…¥é›†ç¾¤éœ€è¦çš„ Token å’Œå‘½ä»¤ã€‚</p>',2)),n(p),n(r)])}const m=d(y,[["render",c]]);export{f as __pageData,m as default};
