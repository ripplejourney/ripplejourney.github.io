import{_ as d,ad as l,c as o,o as g,b as s,k as t,aE as k,a5 as a,m as n}from"./chunks/framework.BN_kmrHV.js";const m=JSON.parse('{"title":"é€šè¿‡ kubeadm éƒ¨ç½² Kubernetes é›†ç¾¤çš„æ—¶å€™çš„é—®é¢˜æ’æŸ¥","description":"","frontmatter":{"tags":["è¿ç»´/äº‘åŸç”Ÿ/Kubernetes","è¿ç»´/äº‘åŸç”Ÿ/Kubernetes/K8s","å¼€å‘/äº‘åŸç”Ÿ/Kubernetes","å¼€å‘/äº‘åŸç”Ÿ/Kubernetes/K8s","å‘½ä»¤è¡Œ/systemd","å‘½ä»¤è¡Œ/journalctl","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux","è®¡ç®—æœº/æ“ä½œç³»ç»Ÿ/Linux/å‘½ä»¤è¡Œ","æ“ä½œç³»ç»Ÿ/Linux","æ“ä½œç³»ç»Ÿ/Debian","æ“ä½œç³»ç»Ÿ/Debian/Debian-11","å¼€å‘/è™šæ‹ŸåŒ–/cgroup","å‘½ä»¤è¡Œ/kubeadm","è½¯ä»¶/äº‘åŸç”Ÿ/kubeadm","å‘½ä»¤è¡Œ/kubectl","è½¯ä»¶/äº‘åŸç”Ÿ/kubectl","è½¯ä»¶/äº‘åŸç”Ÿ/kubelet","è®¡ç®—æœº/ç½‘ç»œ"]},"headers":[],"relativePath":"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/é€šè¿‡ Kubeadm éƒ¨ç½² Kubernetes é›†ç¾¤çš„æ—¶å€™çš„é—®é¢˜æ’æŸ¥.md","filePath":"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/é€šè¿‡ Kubeadm éƒ¨ç½² Kubernetes é›†ç¾¤çš„æ—¶å€™çš„é—®é¢˜æ’æŸ¥.md"}'),c={name:"zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/é€šè¿‡ Kubeadm éƒ¨ç½² Kubernetes é›†ç¾¤çš„æ—¶å€™çš„é—®é¢˜æ’æŸ¥.md"},u={tabindex:"0"};function y(C,i,F,b,B,f){const h=l("NolebasePageProperties"),e=l("VPNolebaseInlineLinkPreview"),r=l("NolebaseGitContributors"),p=l("NolebaseGitChangelog");return g(),o("div",null,[i[18]||(i[18]=s("h1",{id:"é€šè¿‡-kubeadm-éƒ¨ç½²-kubernetes-é›†ç¾¤çš„æ—¶å€™çš„é—®é¢˜æ’æŸ¥",tabindex:"-1"},[a("é€šè¿‡ "),s("code",null,"kubeadm"),a(" éƒ¨ç½² Kubernetes é›†ç¾¤çš„æ—¶å€™çš„é—®é¢˜æ’æŸ¥ "),s("a",{class:"header-anchor",href:"#é€šè¿‡-kubeadm-éƒ¨ç½²-kubernetes-é›†ç¾¤çš„æ—¶å€™çš„é—®é¢˜æ’æŸ¥","aria-label":"Permalink to â€œé€šè¿‡ kubeadm éƒ¨ç½² Kubernetes é›†ç¾¤çš„æ—¶å€™çš„é—®é¢˜æ’æŸ¥â€"},"â€‹")],-1)),t(h),i[19]||(i[19]=s("h3",{id:"æ–‡æ¡£å…¼å®¹æ€§",tabindex:"-1"},[a("æ–‡æ¡£å…¼å®¹æ€§ "),s("a",{class:"header-anchor",href:"#æ–‡æ¡£å…¼å®¹æ€§","aria-label":"Permalink to â€œæ–‡æ¡£å…¼å®¹æ€§â€"},"â€‹")],-1)),s("table",u,[i[9]||(i[9]=s("thead",null,[s("tr",null,[s("th",null,"ä¸»ä½“"),s("th",null,"ç‰ˆæœ¬å·"),s("th",null,"æ–‡æ¡£åœ°å€ï¼ˆå¦‚æœæœ‰ï¼‰")])],-1)),s("tbody",null,[i[6]||(i[6]=s("tr",null,[s("td",null,"Debian"),s("td",null,"11"),s("td")],-1)),s("tr",null,[i[1]||(i[1]=s("td",null,"Kubernetes",-1)),i[2]||(i[2]=s("td",null,"1.28",-1)),s("td",null,[t(e,{href:"https://v1-28.docs.kubernetes.io/",target:"_blank",rel:"noreferrer"},{default:n(()=>[...i[0]||(i[0]=[a("https://v1-28.docs.kubernetes.io/",-1)])]),_:1})])]),s("tr",null,[i[4]||(i[4]=s("td",null,"Docker",-1)),i[5]||(i[5]=s("td",null,"24.0.2",-1)),s("td",null,[t(e,{href:"https://docs.docker.com/",target:"_blank",rel:"noreferrer"},{default:n(()=>[...i[3]||(i[3]=[a("https://docs.docker.com/",-1)])]),_:1})])]),i[7]||(i[7]=s("tr",null,[s("td",null,"containerd"),s("td",null,"1.7.6"),s("td")],-1)),i[8]||(i[8]=s("tr",null,[s("td",null,"Linux kernel"),s("td",null,"5.10.0"),s("td")],-1))])]),i[20]||(i[20]=k(`<h3 id="malformed-header-missing-http-content-type" tabindex="-1"><code>malformed header: missing HTTP content-type</code> <a class="header-anchor" href="#malformed-header-missing-http-content-type" aria-label="Permalink to â€œmalformed header: missing HTTP content-typeâ€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[kubelet-finalize] Updating </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/etc/kubernetes/kubelet.conf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> to point to a rotatable kubelet client certificate and key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">I1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:04:31.944913</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   61969</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeletfinalize.go:134]</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [kubelet-finalize] Restarting the kubelet to enable client certificate rotation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rpc</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> error:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> code</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Unknown</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> desc</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> malformed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> header:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> missing</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> HTTP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> content-type</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">unable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> deployment</span></span></code></pre></div><p>è¯·é€šè¿‡ <code>systemd</code> æ£€æŸ¥ <code>kubelet</code> æ˜¯å¦è¿è¡Œæ­£å¸¸ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ <code>journalctl -xeu kubelet</code> æ¥æŸ¥çœ‹ <code>kubelet</code> æœ€åçš„æ—¥å¿—ã€‚</p><p>é¦–å…ˆç¡®å®šä½ æ˜¯å¦æœ‰æ·»åŠ  <code>--skip-phases=addon/kube-proxy</code> å‚æ•°å»æ‰§è¡Œ <code>kubeadm init</code>ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½ å¯èƒ½éœ€è¦å…ˆæ’æŸ¥ä¸€ä¸‹ <code>kube-proxy</code> æˆ–è€…è¯´ HAProxy çš„é—®é¢˜ã€‚</p><h3 id="net-http-request-canceled-client-timeout-exceeded-while-awaiting-headers" tabindex="-1"><code>net/http: request canceled (Client.Timeout exceeded while awaiting headers)</code> <a class="header-anchor" href="#net-http-request-canceled-client-timeout-exceeded-while-awaiting-headers" aria-label="Permalink to â€œnet/http: request canceled (Client.Timeout exceeded while awaiting headers)â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[kubelet-finalize] Updating </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/etc/kubernetes/kubelet.conf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> to point to a rotatable kubelet client certificate and key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">I1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 17:25:43.478404</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   54691</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeletfinalize.go:134]</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [kubelet-finalize] Restarting the kubelet to enable client certificate rotation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Put</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;https://10.24.0.2:6443/api/v1/namespaces/kube-system/services/kube-dns?timeout=10s&quot;:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> net/http:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> request</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> canceled</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (Client.Timeout </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">exceeded</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> while</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> awaiting</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> headers</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">unable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> create/update</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DNS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> service</span></span></code></pre></div><p>è¯·é€šè¿‡ <code>systemd</code> æ£€æŸ¥ <code>kubelet</code> æ˜¯å¦è¿è¡Œæ­£å¸¸ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ <code>journalctl -xeu kubelet</code> æ¥æŸ¥çœ‹ <code>kubelet</code> æœ€åçš„æ—¥å¿—ã€‚</p><p>é¦–å…ˆç¡®å®šä½ æ˜¯å¦æœ‰æ·»åŠ  <code>--skip-phases=addon/kube-proxy</code> å‚æ•°å»æ‰§è¡Œ <code>kubeadm init</code>ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½ å¯èƒ½éœ€è¦å…ˆæ’æŸ¥ä¸€ä¸‹ <code>kube-proxy</code> æˆ–è€…è¯´ HAProxy çš„é—®é¢˜ã€‚</p><h3 id="failed-to-allocate-ip-ip-provided-ip-is-already-allocated" tabindex="-1"><code>failed to allocate IP &lt;IP&gt;: provided IP is already allocated</code> <a class="header-anchor" href="#failed-to-allocate-ip-ip-provided-ip-is-already-allocated" aria-label="Permalink to â€œfailed to allocate IP &lt;IP&gt;: provided IP is already allocatedâ€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[kubelet-finalize] Updating </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/etc/kubernetes/kubelet.conf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> to point to a rotatable kubelet client certificate and key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">I1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:02:10.780271</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   60063</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubeletfinalize.go:134]</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [kubelet-finalize] Restarting the kubelet to enable client certificate rotation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;kube-dns&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> invalid:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> spec.clusterIPs:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Invalid</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> value:</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> []string{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">&quot;10.96.0.10&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">}:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> allocate</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 10.96.0.10:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> provided</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> already</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> allocated</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">unable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> create/update</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> DNS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> service</span></span></code></pre></div><p>è¯·é€šè¿‡ <code>systemd</code> æ£€æŸ¥ <code>kubelet</code> æ˜¯å¦è¿è¡Œæ­£å¸¸ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ <code>journalctl -xeu kubelet</code> æ¥æŸ¥çœ‹ <code>kubelet</code> æœ€åçš„æ—¥å¿—ã€‚</p><p>é¦–å…ˆç¡®å®šä½ æ˜¯å¦æœ‰æ·»åŠ  <code>--skip-phases=addon/kube-proxy</code> å‚æ•°å»æ‰§è¡Œ <code>kubeadm init</code>ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½ å¯èƒ½éœ€è¦å…ˆæ’æŸ¥ä¸€ä¸‹ <code>kube-proxy</code> æˆ–è€…è¯´ HAProxy çš„é—®é¢˜ã€‚</p><h3 id="kubelet-åœ¨-journalctl-æ—¥å¿—ä¸­çš„çš„-error-while-dialing-dial-unix-run-containerd-containerd-sock-connect-no-such-file-or-directory-é”™è¯¯" tabindex="-1"><code>kubelet</code> åœ¨ <code>journalctl</code> æ—¥å¿—ä¸­çš„çš„ <code>Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</code> é”™è¯¯ <a class="header-anchor" href="#kubelet-åœ¨-journalctl-æ—¥å¿—ä¸­çš„çš„-error-while-dialing-dial-unix-run-containerd-containerd-sock-connect-no-such-file-or-directory-é”™è¯¯" aria-label="Permalink to â€œkubelet åœ¨ journalctl æ—¥å¿—ä¸­çš„çš„ Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory é”™è¯¯â€">â€‹</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">E1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:48.784251</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> remote_runtime.go:294]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;ListPodSandbox with filter from runtime service failed&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> err=&quot;rpc error: code = Unavailable desc = connection error: desc = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> filter=&quot;nil&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10æœˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[62982]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> E1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:48.784310</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kuberuntime_sandbox.go:297]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Failed to list pod sandboxes&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> err=&quot;rpc error: code = Unavailable desc = connection error: desc = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10æœˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:48</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[62982]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> E1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:48.784346</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> generic.go:238]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;GenericPLEG: Unable to retrieve pods&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> err=&quot;rpc error: code = Unavailable desc = connection error: desc = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10æœˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:49</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[62982]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> E1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:49.785335</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> remote_runtime.go:294]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;ListPodSandbox with filter from runtime service failed&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> err=&quot;rpc error: code = Unavailable desc = connection error: desc = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> filter=&quot;nil&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10æœˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:50</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[62982]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> E1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:50.786291</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kuberuntime_sandbox.go:297]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Failed to list pod sandboxes&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> err=&quot;rpc error: code = Unavailable desc = connection error: desc = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10æœˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:50</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[62982]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> E1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:50.786324</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> generic.go:238]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;GenericPLEG: Unable to retrieve pods&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> err=&quot;rpc error: code = Unavailable desc = connection error: desc = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10æœˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:51</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[62982]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> E1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:51.182257</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> remote_runtime.go:633]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Status from runtime service failed&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> err=&quot;rpc error: code = Unavailable desc = connection error: desc = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10æœˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:51</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[62982]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> E1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:51.213930</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> remote_runtime.go:407]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;ListContainers with filter from runtime service failed&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> err=&quot;rpc error: code = Unavailable desc = connection error: desc = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> filter=&quot;&amp;ContainerFilter{Id:,State:nil,PodSandboxId:,LabelSelector:map[string]string{},}&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10æœˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:51</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[62982]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> E1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:51.213991</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> container_log_manager.go:185]</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Failed to rotate container logs&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> err=&quot;failed to list containers: rpc error: code = Unavailable desc = connection error: desc = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">10æœˆ</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:51</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> node1</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> kubelet[62982]:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> W1007</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 18:12:51.787660</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">   62982</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> logging.go:59]</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [core] [Channel </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#1 SubChannel #2] grpc: addrConn.createTransport failed to connect to {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">10æœˆ </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">07</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 18:12:51 node1 kubelet[62982]:   </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Addr&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/run/containerd/containerd.sock&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">10æœˆ </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">07</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 18:12:51 node1 kubelet[62982]:   </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ServerName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/run/containerd/containerd.sock&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">10æœˆ </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">07</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 18:12:51 node1 kubelet[62982]:   </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Attributes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: null,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">10æœˆ </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">07</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 18:12:51 node1 kubelet[62982]:   </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;BalancerAttributes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: null,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">10æœˆ </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">07</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 18:12:51 node1 kubelet[62982]:   </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: 0,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">10æœˆ </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">07</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 18:12:51 node1 kubelet[62982]:   </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Metadata&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">10æœˆ </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">07</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 18:12:51 node1 kubelet[62982]: }. Err: connection error: desc </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;transport: Error while dialing: dial unix /run/containerd/containerd.sock: connect: no such file or directory&quot;</span></span></code></pre></div>`,14)),s("p",null,[i[13]||(i[13]=a("æ˜¯å¦æœ‰å‚ç…§ ",-1)),t(e,{href:"https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/kubeadm/configure-cgroup-driver/",target:"_blank",rel:"noreferrer"},{default:n(()=>[...i[10]||(i[10]=[a("é…ç½® cgroup é©±åŠ¨ | Kubernetes",-1)])]),_:1}),i[14]||(i[14]=a(" é…ç½®è¿‡ CGroup Driverï¼Ÿå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥å‚è€ƒ ",-1)),t(e,{href:"/zh-CN/ç¬”è®°/ğŸ§± åŸºç¡€è®¾æ–½/ğŸš¢ Kubernetes/å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº.html"},{default:n(()=>[...i[11]||(i[11]=[a("å‡†å¤‡ Kubernetes èŠ‚ç‚¹è£¸é‡‘å±è™šæ‹Ÿæœº",-1)])]),_:1}),i[15]||(i[15]=a(" æˆ–è€… ",-1)),t(e,{href:"https://github.com/kubernetes/kubeadm/issues/2699",target:"_blank",rel:"noreferrer"},{default:n(()=>[...i[12]||(i[12]=[a("Error during kubeadm init - addon phase with coreDNS Â· Issue #2699 Â· kubernetes/kubeadm",-1)])]),_:1}),i[16]||(i[16]=a(" Issue ä¸­çš„è„šæœ¬è¿›è¡Œé…ç½®ï¼š",-1))]),i[21]||(i[21]=k(`<blockquote><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light one-dark-pro" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># make a copy of the default containerd configuration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">containerd</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> default</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\|</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># set to use systemd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;s/SystemdCgroup = false/SystemdCgroup = true/g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># adjust pause image to what&#39;s actually installed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PAUSE_IMAGE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> images</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> \\|</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pause</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;s,sandbox_image = .*,sandbox_image = </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$PAUSE_IMAGE</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,g&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/containerd/config.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># restart the containerd service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> containerd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> container</span></span></code></pre></div></blockquote><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to â€œå‚è€ƒèµ„æ–™â€">â€‹</a></h2>`,2)),s("p",null,[t(e,{href:"https://github.com/kubernetes/kubeadm/issues/2699",target:"_blank",rel:"noreferrer"},{default:n(()=>[...i[17]||(i[17]=[a("Error during kubeadm init - addon phase with coreDNS Â· Issue #2699 Â· kubernetes/kubeadm",-1)])]),_:1})]),t(r),t(p)])}const E=d(c,[["render",y]]);export{m as __pageData,E as default};
